<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>linux | Blog of James Brown</title>
  <meta name="author" content="James Brown">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Blog of James Brown"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/blog/atom.xml" title="Blog of James Brown" type="application/atom+xml">
  
  
    <link href="/blog/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/blog/js/jquery-2.0.3.min.js"></script>
  
  
  <!-- analytics -->
  



<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/blog/">Blog of James Brown</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/blog/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      

<!-- title -->
<div class="page-header page-header-inverse ">
  <h1 class="archive-title-tag title title-inverse ">linux</h1>
</div>

<div class="row page">
  <!-- cols -->
  
  <div class="col-md-9">
	

	  <div id="top_search"></div>

      
         <!-- display as entry -->
	     <div class="mypage">
	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-26 </div>
			<div class="article-title"><a href="/blog/2024/07/26/47372e0e-9f4a-4590-af31-cbfe5ca2c39d/" title="This article guides you through the process of copying an encrypted Linux installation to a new disk. It explains how to use the &#39;dd&#39; command in the terminal to clone the source disk to the target disk, and then resize the encrypted partition, root partition, and swap partition using either KDE Partition Manager or following a manual guide provided in the link.">How To Clone And Resize Encrypted Linux Installation</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h1 id="copy-encrypted-linux-install-to-new-disk"><a href="#copy-encrypted-linux-install-to-new-disk" class="headerlink" title="copy encrypted linux install to new disk"></a>copy encrypted linux install to new disk</h1><p>perform a bit-by-bit clone to new disk</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">dd</span> <span class="keyword">if</span>=&lt;source_disk_device&gt; of=&lt;target_disk_device&gt; bs=4M status=progress</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>remember to detach the old disk and enlarge the system partition on new disk</p>
<hr>
<p>in kde partiton manager, you can resize both the encrypted partition and the root partition as well as the swap partition (install tools prompted by name)</p>
<p>follow the guide here to do it manually:</p>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Resizing_LVM-on-LUKS">https://wiki.archlinux.org/title/Resizing_LVM-on-LUKS</a></p>

	
	</div>
  <a type="button" href="/blog/2024/07/26/47372e0e-9f4a-4590-af31-cbfe5ca2c39d/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-24 </div>
			<div class="article-title"><a href="/blog/2024/07/24/2ff88d41-c9fc-4af0-84ba-ef10cf603ef6/" title="This article provides step-by-step instructions to help you remove X11 and Qt dependencies from your Ubuntu system, turning it into a headless setup. By following these instructions, you can optimize your Ubuntu installation for servers or other environments where a graphical user interface is not required.">How To Remove X11 And Qt Dependencies For A Headless Ubuntu System</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h1 id="Make-desktop-ubuntu-headless"><a href="#Make-desktop-ubuntu-headless" class="headerlink" title="Make desktop ubuntu headless"></a>Make desktop ubuntu headless</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge libx11.* libqt.*</span><br><span class="line">sudo apt-get autoremove -y</span><br><span class="line">sudo apt-get clean</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/07/24/2ff88d41-c9fc-4af0-84ba-ef10cf603ef6/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-06-19 </div>
			<div class="article-title"><a href="/blog/2024/06/19/5f0cafc9-9eb9-4cb3-b106-af69965de47e/" title="The article provides instructions on running GUI programs with cron in Linux and monitoring root filesystem disk usage using `notify-send` and setting environment variables. It also includes a script for disk usage monitoring that sends alerts when the root filesystem has less than 10% free space.">Run Gui Programs Under Cron, Monitor Root Filesystem Disk Usage And Send Alarm</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>the ultimate solution:</p>
<p>copy all current user environment variables to crontab.</p>
<hr>
<p>to run <code>notify-send</code> you have to set <code>DBUS_SESSION_BUS_ADDRESS</code></p>
<hr>
<p>to run other gui programs you set <code>DISPLAY</code> and <code>XAUTHORITY</code></p>
<hr>
<p><code>wall</code> works for <code>tmux</code> and ssh sessions but not <code>gnome-terminal</code>.</p>
<p>in kde everything works fine. install konsole instead.</p>
<hr>
<p>script for monitoring disk usage:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">used_percentage=$(<span class="built_in">df</span> / | awk <span class="string">&#x27;NR==2 &#123;sub(/%/, &quot;&quot;, $5); print $5&#125;&#x27;</span>)</span><br><span class="line">alarm_message=<span class="string">&quot;Root filesystem has less than 10% free space.&quot;</span></span><br><span class="line"><span class="comment"># Compare the percentage with the number 90</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$used_percentage</span>&quot;</span> -lt 90 ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Disk is ok.&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">wall <span class="variable">$alarm_message</span></span><br><span class="line">notify-send <span class="variable">$alarm_message</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/06/19/5f0cafc9-9eb9-4cb3-b106-af69965de47e/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-05-12 </div>
			<div class="article-title"><a href="/blog/2024/05/12/8488cce3-4170-4d90-bc4a-ab700a07bd2e/" title="This article provides a step-by-step guide on how to install the `sysstat` package and use the `sar -u` command to view CPU usage history, enabling users to monitor and analyze their system&#39;s performance.">Viewing Cpu Usage History With Sysstat And The Sar Command</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h1 id="View-history-CPU-usage-statistics"><a href="#View-history-CPU-usage-statistics" class="headerlink" title="View history CPU usage statistics"></a>View history CPU usage statistics</h1><p>First install <code>sysstat</code> package, then run <code>sar -u</code></p>

	
	</div>
  <a type="button" href="/blog/2024/05/12/8488cce3-4170-4d90-bc4a-ab700a07bd2e/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2023-09-26 </div>
			<div class="article-title"><a href="/blog/2023/09/26/3bda6569-50ca-44c1-a21c-b1575bfa27ae/" title="This article provides a guide on how to preserve system stability while detaching and reattaching Linux disks using the `mount --bind` command, ensuring data consistency and seamless disk management.">Maintaining Stability With Mount --Bind: Detaching And Reattaching Linux Disks</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h1 id="linux-disk-detach-and-reattach-how-to-maintain-stability"><a href="#linux-disk-detach-and-reattach-how-to-maintain-stability" class="headerlink" title="linux disk detach and reattach, how to maintain stability"></a>linux disk detach and reattach, how to maintain stability</h1><p>use <code>mount --bind</code></p>

	
	</div>
  <a type="button" href="/blog/2023/09/26/3bda6569-50ca-44c1-a21c-b1575bfa27ae/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-15 </div>
			<div class="article-title"><a href="/blog/2022/12/15/a40af93d-6ad7-4f21-b874-5391fc45fa2e/" title="The reset-usb.sh script is a solution to hard disk detection issues in Linux, specifically addressing USB controller problems. It works by utilizing sub-scripts and a for loop to unbind and rebind the controllers, with suggested enhancements for Kali Linux.">Reset Usb</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>the same for <code>/sys/bus/usb/drivers/*</code>.</p>
<hr>
<p>in case kali failed to detect presence of hard disks, shall you pop up a dialog for us to decide whether to reset to usb or not.</p>
<h2 id="reset-usb-sh"><a href="#reset-usb-sh" class="headerlink" title="reset-usb.sh"></a>reset-usb.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">reset-ahci-controllers.sh</span><br><span class="line">reset-xhci-controllers.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="reset-ahci-controllers-sh"><a href="#reset-ahci-controllers-sh" class="headerlink" title="reset-ahci-controllers.sh"></a>reset-ahci-controllers.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># this freaking works.</span></span><br><span class="line"><span class="comment"># Script to reset all local xHCI (USB) controllers</span></span><br><span class="line"><span class="comment"># Based on: http://billauer.co.il/blog/2013/02/usb-reset-ehci-uhci-linux/</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;EUID&#125;</span> != 0 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> This must be run as root!</span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">for</span> xhci <span class="keyword">in</span> /sys/bus/pci/drivers/ahci; <span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">cd</span> <span class="variable">$&#123;xhci&#125;</span>; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Weird error. Failed to change directory to <span class="variable">$&#123;xhci&#125;</span>.&quot;</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Resetting devices from <span class="variable">$&#123;xhci&#125;</span>...&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ????:??:??.?; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; unbind</span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; <span class="built_in">bind</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="reset-xhci-controllers-sh"><a href="#reset-xhci-controllers-sh" class="headerlink" title="reset-xhci-controllers.sh"></a>reset-xhci-controllers.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># this freaking works.</span></span><br><span class="line"><span class="comment"># Script to reset all local xHCI (USB) controllers</span></span><br><span class="line"><span class="comment"># Based on: http://billauer.co.il/blog/2013/02/usb-reset-ehci-uhci-linux/</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;EUID&#125;</span> != 0 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> This must be run as root!</span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">for</span> xhci <span class="keyword">in</span> /sys/bus/pci/drivers/?hci_hcd; <span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">cd</span> <span class="variable">$&#123;xhci&#125;</span>; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Weird error. Failed to change directory to <span class="variable">$&#123;xhci&#125;</span>.&quot;</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Resetting devices from <span class="variable">$&#123;xhci&#125;</span>...&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ????:??:??.?; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; unbind</span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; <span class="built_in">bind</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/12/15/a40af93d-6ad7-4f21-b874-5391fc45fa2e/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-08-11 </div>
			<div class="article-title"><a href="/blog/2022/08/11/2a69a080-7a45-4b12-aca1-b81c0fd1737c/" title="This article explains how to troubleshoot and resolve a fan issue on a Linux machine by installing i8kctl and thermald, configuring pwmconfig with Expect for fan control, and allowing sufficient time for the fans to reach full speed.">Linux Fan Not Spinning, Gpu Fan Not Spinning</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>everytime the fucking machine restarts, it fails devastatingly.</p>
<p>the word: <code>Giving the fans some time to reach full speed...</code></p>
<p>the script:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/expect</span></span><br><span class="line">spawn pwmconfig</span><br><span class="line"><span class="comment">#expect &quot;Giving the fans some time to reach full speed...&quot;</span></span><br><span class="line">expect <span class="string">&quot;If you do not want to do this hit control-C now!!!&quot;</span></span><br><span class="line">send <span class="string">&quot;\03&quot;</span></span><br><span class="line">expect eof</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>hope this shit works?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 255 | sudo <span class="built_in">tee</span> /sys/class/hwmon/hwmon6/pwm3</span><br><span class="line"><span class="built_in">echo</span> 255 | sudo <span class="built_in">tee</span> /sys/class/hwmon/hwmon6/pwm1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>i have install something other than that. like i8kctl, some thermal controllers by intel (thermald)? but still gpu fan not spinning till now.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt install -y lm-sensors fancontrol</span><br><span class="line">sensors-detect</span><br><span class="line">pwmconfig</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>already have cpu frequency under control by running temp_throttle.sh</p>
<p>notes: found controllers <code>dell_smm-isa-0000</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Found the following PWM controls:</span><br><span class="line">hwmon6/pwm1           current value: 255</span><br><span class="line">hwmon6/pwm3           current value: 255</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/08/11/2a69a080-7a45-4b12-aca1-b81c0fd1737c/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-08-09 </div>
			<div class="article-title"><a href="/blog/2022/08/09/80ba2937-9af5-49cf-8308-4848160a9ec1/" title="This article provides instructions for managing systemd services and viewing logs on Linux. It includes sample configuration files for various applications such as frpc, pyjom_webdav_rclone, clash_fastgithub, tujia_scraper_qq_bot, tempthrottle, and sync_git_repos_syncdog.">Systemd On Linux, Maintainence Details</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h2 id="view-full-logs"><a href="#view-full-logs" class="headerlink" title="view full logs"></a>view full logs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u &lt;serviceName&gt;.service</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="create-install-restart-reload"><a href="#create-install-restart-reload" class="headerlink" title="create, install, restart, reload"></a>create, install, restart, reload</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/systemd/system</span><br><span class="line">create &lt;serviceName&gt;.service</span><br><span class="line">systemctl <span class="built_in">enable</span> &lt;serviceName&gt;.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start &lt;serviceName&gt;.service</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="sample-systemd-service-config-files"><a href="#sample-systemd-service-config-files" class="headerlink" title="sample systemd service config files"></a>sample systemd service config files</h2><p>maybe we should add some autorestart configs at it?</p>
<p>frpc_service.service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Unit</span>]</span><br><span class="line"><span class="title class_">Description</span>=frpc service, expose ssh, webdav and code-server ports</span><br><span class="line"><span class="title class_">Wants</span>=network.<span class="property">target</span></span><br><span class="line"><span class="title class_">After</span>=syslog.<span class="property">target</span> network-online.<span class="property">target</span></span><br><span class="line">[<span class="title class_">Service</span>]</span><br><span class="line"><span class="title class_">Type</span>=simple</span><br><span class="line"><span class="title class_">User</span>=root</span><br><span class="line"><span class="title class_">ExecStart</span>=<span class="regexp">/root/</span>frp_client_linux/frp_0<span class="number">.36</span>.2_linux_amd64/frpc -c frpc.<span class="property">ini</span></span><br><span class="line"><span class="title class_">WorkingDirectory</span>=<span class="regexp">/root/</span>frp_client_linux/frp_0<span class="number">.36</span>.2_linux_amd64</span><br><span class="line"><span class="title class_">Restart</span>=on-failure</span><br><span class="line"><span class="title class_">RestartSec</span>=<span class="number">10</span></span><br><span class="line"><span class="title class_">KillMode</span>=process</span><br><span class="line">[<span class="title class_">Install</span>]</span><br><span class="line"><span class="title class_">WantedBy</span>=multi-user.<span class="property">target</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>pyjom_webdav_rclone_service.service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Unit</span>]</span><br><span class="line"><span class="title class_">Description</span>=rclone webdav served on pyjom, after the disk is mounted</span><br><span class="line">[<span class="title class_">Service</span>]</span><br><span class="line"><span class="title class_">User</span>=root</span><br><span class="line"><span class="title class_">ExecStart</span>=<span class="regexp">/usr/</span>bin/python3 mount_help_and_serve_pyjom.<span class="property">py</span></span><br><span class="line"><span class="title class_">WorkingDirectory</span>=<span class="regexp">/root/</span><span class="title class_">Desktop</span>/works/restore_sessions</span><br><span class="line">[<span class="title class_">Install</span>]</span><br><span class="line"><span class="title class_">WantedBy</span>=multi-user.<span class="property">target</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>tempthrottle.service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Unit</span>]</span><br><span class="line"><span class="title class_">Description</span>=temperature control, cpu temperature under <span class="number">60</span> celsius</span><br><span class="line">[<span class="title class_">Service</span>]</span><br><span class="line"><span class="title class_">User</span>=root</span><br><span class="line"><span class="title class_">ExecStart</span>=<span class="regexp">/usr/</span>bin/python3 tempthrottle_daemon.<span class="property">py</span></span><br><span class="line"><span class="title class_">WorkingDirectory</span>=<span class="regexp">/root/</span><span class="title class_">Desktop</span>/works/restore_sessions</span><br><span class="line">[<span class="title class_">Install</span>]</span><br><span class="line"><span class="title class_">WantedBy</span>=multi-user.<span class="property">target</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>clash_fastgithub.service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Unit</span>]</span><br><span class="line"><span class="title class_">Description</span>=<span class="title class_">Clash</span> <span class="title class_">Fastgithub</span> <span class="title class_">Proxy</span></span><br><span class="line"><span class="title class_">After</span>=network.<span class="property">target</span></span><br><span class="line">[<span class="title class_">Service</span>]</span><br><span class="line"><span class="title class_">Type</span>=simple</span><br><span class="line"><span class="title class_">Restart</span>=always</span><br><span class="line"><span class="title class_">ExecStart</span>=<span class="regexp">/usr/</span>bin/clash -d /etc/clash</span><br><span class="line">[<span class="title class_">Install</span>]</span><br><span class="line"><span class="title class_">WantedBy</span>=multi-user.<span class="property">target</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>tujia_scraper_qq_bot.service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Unit</span>]</span><br><span class="line"><span class="title class_">Description</span>=two crucial <span class="attr">services</span>: tujia scraper, qq bot</span><br><span class="line"><span class="title class_">Wants</span>=network.<span class="property">target</span></span><br><span class="line"><span class="title class_">After</span>=syslog.<span class="property">target</span> network-online.<span class="property">target</span></span><br><span class="line">[<span class="title class_">Service</span>]</span><br><span class="line"><span class="title class_">Environment</span>=<span class="string">&quot;DISPLAY=:1&quot;</span></span><br><span class="line"><span class="title class_">Environment</span>=<span class="string">&quot;XAUTHORITY=/root/.Xauthority&quot;</span></span><br><span class="line"><span class="title class_">User</span>=root</span><br><span class="line"><span class="title class_">ExecStart</span>=<span class="regexp">/usr/</span>bin/python3 main_daemon.<span class="property">py</span></span><br><span class="line"><span class="title class_">WorkingDirectory</span>=<span class="regexp">/root/</span><span class="title class_">Desktop</span>/works/restore_sessions</span><br><span class="line">[<span class="title class_">Install</span>]</span><br><span class="line"><span class="title class_">WantedBy</span>=graphical.<span class="property">target</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sync_git_repos_syncdog.service</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Unit</span>]</span><br><span class="line"><span class="title class_">Description</span>=syncdog (server), to sync things to the cloud (github)</span><br><span class="line"><span class="title class_">Wants</span>=sshd.<span class="property">service</span></span><br><span class="line"><span class="title class_">Wants</span>=network.<span class="property">target</span></span><br><span class="line">[<span class="title class_">Service</span>]</span><br><span class="line"><span class="title class_">User</span>=root</span><br><span class="line"><span class="title class_">ExecStart</span>=<span class="regexp">/usr/</span>bin/python3 syncdog_test.<span class="property">py</span></span><br><span class="line"><span class="title class_">WorkingDirectory</span>=<span class="regexp">/root/</span><span class="title class_">Desktop</span>/works/sync_git_repos</span><br><span class="line">[<span class="title class_">Install</span>]</span><br><span class="line"><span class="title class_">WantedBy</span>=multi-user.<span class="property">target</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/08/09/80ba2937-9af5-49cf-8308-4848160a9ec1/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-07-27 </div>
			<div class="article-title"><a href="/blog/2022/07/27/95886951-6430-4ced-b481-fb6f1d357b45/" title="This article outlines various methods to restore Linux window sessions using tools such as wmctrl, devilspie, and launch_on_workspace. It also provides links to helpful online resources for starting applications in specific workspaces and explains how to manually restore a session by enabling auto-save-session in org.gnome.gnome-session through dconf-editor.">Linux Restore Window Sessions</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>to relaunch app in given workspace</p>
<p>tools:</p>
<p>wmctrl</p>
<p><a target="_blank" rel="noopener" href="https://help.ubuntu.com/community/Devilspie">devilspie</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/xblahoud/launch_on_workspace">launch_on_workspace</a></p>
<p>references:</p>
<p><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/27050/how-to-start-an-application-on-a-different-workspace">https://unix.stackexchange.com/questions/27050/how-to-start-an-application-on-a-different-workspace</a></p>
<p><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/89946/open-application-in-specific-workspace">https://askubuntu.com/questions/89946/open-application-in-specific-workspace</a></p>
<p>npm install -g linux-window-session-manager</p>
<p>restore session manually</p>
<p>dconf-editor</p>
<p>org.gnome.gnome-session</p>
<p>auto-save-session -&gt; on</p>

	
	</div>
  <a type="button" href="/blog/2022/07/27/95886951-6430-4ced-b481-fb6f1d357b45/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-07-25 </div>
			<div class="article-title"><a href="/blog/2022/07/25/0ce1623e-b08e-4592-ba77-ee4e10caa833/" title="This article discusses the issue of CPU overheating in Linux systems and provides potential solutions such as cpufrequtils and temp-throttle. The recommended desired temperature is 60°C, and managing CPU temperature effectively can help reduce the likelihood of GPU issues.">Cpu Overheating (Temperature Too High)</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h2 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h2><p><a target="_blank" rel="noopener" href="http://kernel.org/pub/linux/utils/kernel/cpufreq/cpufrequtils.html">cpufrequtils</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Sepero/temp-throttle">throttling cpu frequencies by temperature incrementally</a></p>
<p>the desired temperature is 60.</p>
<p>usually when one throttles the CPU temperature, the GPU cannot be overheated.</p>
<p>it is turning my core i7 into a pentium 3! but not entirely cumbersome.</p>

	
	</div>
  <a type="button" href="/blog/2022/07/25/0ce1623e-b08e-4592-ba77-ee4e10caa833/#more" class="btn btn-default more">Read More</a>
</div>

	       
	     </div>
	     <div>
	       <center>
	         <div class="pagination">
<ul class="pagination">
	 
		
          <li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
        

        <li><a href="/blog/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/blog/tags/linux/page/2/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>
        
	
</ul>
</div>

	       </center>
	     </div>	
      

</div> <!-- col-md-9/col-md-12 -->


<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/agi_computer_control/" title="Autonomous computer agent" target="_blank"]);">Project Cybergod</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media content automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/prometheous/" title="Automated documentation, AI+IR(RAG)" target="_blank"]);">Project Prometheus</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media Content Automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/my_blog_source/" title="Source code of my blog"" target="_blank"]);">Blog Source Code</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/james4ever0" title="My Github account" target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://samoyedsun.github.io/" title="Samoyedsun's Blog" target="_blank"]);">Samoyedsun&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="http://atlant1c.cn/" title="Atlant1c's Blog" target="_blank"]);">Atlant1c&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://www.gregoryuan.com/" title="Gregoryuan's Blog" target="_blank"]);">Gregoryuan&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://yubingtao.netlify.app/" title="Yubingtao's Blog" target="_blank"]);">Yubingtao&#39;s Blog</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->




    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2024 James Brown
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/blog/js/jquery.imagesloaded.min.js"></script>
<script src="/blog/js/gallery.js"></script>
<script src="/blog/js/bootstrap.min.js"></script>
<script src="/blog/js/main.js"></script>
<script src="/blog/js/search.js"></script> 


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/blog/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
</html>