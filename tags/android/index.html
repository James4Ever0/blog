<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>android | Blog of James Brown</title>
  <meta name="author" content="James Brown">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Blog of James Brown"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/blog/atom.xml" title="Blog of James Brown" type="application/atom+xml">
  
  
    <link href="/blog/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/blog/js/jquery-2.0.3.min.js"></script>
  
  
  <!-- analytics -->
  



<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/blog/">Blog of James Brown</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/blog/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      

<!-- title -->
<div class="page-header page-header-inverse ">
  <h1 class="archive-title-tag title title-inverse ">android</h1>
</div>

<div class="row page">
  <!-- cols -->
  
  <div class="col-md-9">
	

	  <div id="top_search"></div>

      
         <!-- display as entry -->
	     <div class="mypage">
	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-11-04 </div>
			<div class="article-title"><a href="/blog/2022/11/04/0307d11f-2de1-4a43-82e5-7ee7476e9fc1/" title="Learn how to register a new file in the Android gallery using Beanshell code. The article explains the process of sending a broadcast intent to scan a specific file and adding it to the Android media scanner, allowing the file to be accessible within the gallery.">Register A New File In Android Gallery Using Beanshell Code</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h1 id="register-new-file-to-android-gallery"><a href="#register-new-file-to-android-gallery" class="headerlink" title="register new file to android gallery"></a>register new file to android gallery</h1><p>code in beanshell:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="type">Intent</span> <span class="variable">mediaScanIntent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);</span><br><span class="line"><span class="type">Uri</span> <span class="variable">contentUri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;file:///storage/emulated/0/Movies/output0_higher.mp4&quot;</span>);</span><br><span class="line">mediaScanIntent.setData(contentUri);</span><br><span class="line">ctx.sendBroadcast(mediaScanIntent);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/11/04/0307d11f-2de1-4a43-82e5-7ee7476e9fc1/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-11-03 </div>
			<div class="article-title"><a href="/blog/2022/11/03/ce30d99a-b8f1-4adf-8a85-b87f6dcbaa70/" title="This article provides a comprehensive guide on Android reverse engineering tools, specifically focusing on IDA, Ghidra, Frida, GDA, and Flowdroid. It explains how to use Frida to attach an existing process and demonstrates its usage with WeChat as an example.">Mastering Android Reverse Engineering Tools: Ida, Ghidra, Frida, Gda And Flowdroid</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<h1 id="安卓反编译"><a href="#安卓反编译" class="headerlink" title="安卓反编译"></a>安卓反编译</h1><p>ida ghidra frida</p>
<p><a target="_blank" rel="noopener" href="https://github.com/iGio90/frida-java-ext">frida extension&#x2F;helper methods</a></p>
<p>attach existing process</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo frida-ps</span><br><span class="line">sudo frida -n WeChat</span><br><span class="line">sudo frida -p [pid]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.gda.wiki:9090/index.php">gda</a> 交互式Android反编译 支持<a target="_blank" rel="noopener" href="http://www.gda.wiki:9090/dataFlow.php">数据流追踪</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/secure-software-engineering/FlowDroid">flowdroid</a></p>

	
	</div>
  <a type="button" href="/blog/2022/11/03/ce30d99a-b8f1-4adf-8a85-b87f6dcbaa70/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-03-05 </div>
			<div class="article-title"><a href="/blog/2022/03/05/ffa78a99-c9b8-4e05-9092-2069bbaaa245/" title="This article focuses on Android emulators, WayDroid and anbox. It explores the various methods to run Android apps on non-Android platforms.">Android Emulators</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>WayDroid</p>
<p>anbox?</p>

	
	</div>
  <a type="button" href="/blog/2022/03/05/ffa78a99-c9b8-4e05-9092-2069bbaaa245/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-02-21 </div>
			<div class="article-title"><a href="/blog/2022/02/21/a86acd5f-0e9d-4173-882c-3bcc263ed3a8/" title="This article explains how to resolve the Android 10 clipboard issue in scrcpy by utilizing Riru&#39;s Clipboard Whitelist module and incorporating the &#39;-K&#39; flag with Python&#39;s reader.py script, allowing compatibility with specific clipboard manager apps.">Android 10 Clipboard Issue For Scrcpy</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>com.github.kr328.clipboard.ClipboardProxy.getPrimaryClip</p>
<p>Magisk Module:</p>
<p>Riru - Clipboard Whitelist</p>
<p>will white list clipboard manager app.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Kr328/Riru-ClipboardWhitelist">https://github.com/Kr328/Riru-ClipboardWhitelist</a></p>
<p><a target="_blank" rel="noopener" href="https://t.me/kr328_riru_modules">https://t.me/kr328_riru_modules</a></p>
<p>script.sh:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scrcpy -K -S 2&gt;&amp;1 | python3 reader.py</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>reader.py:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Response</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">status = <span class="literal">None</span></span><br><span class="line">data = <span class="literal">None</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parseResponse</span>(<span class="params">resultString</span>):</span><br><span class="line">response = re.findall(<span class="string">r&quot;^Broadcasting: Intent &#123; flg=0x400000 cmp=ch.pete.adbclipboard/.ReadReceiver &#125;\nBroadcast completed: result=-1, data=\&quot;((.*\n?)+)\&quot;$&quot;</span>,resultString)[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="keyword">return</span> response</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readFromDevice</span>():</span><br><span class="line">adbProcess = subprocess.Popen(</span><br><span class="line">[<span class="string">&#x27;adb&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;shell&#x27;</span>, <span class="string">&#x27;am&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;broadcast&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;-n&#x27;</span>, <span class="string">&#x27;ch.pete.adbclipboard/.ReadReceiver&#x27;</span>],</span><br><span class="line">stdout=subprocess.PIPE)</span><br><span class="line">resultString = adbProcess.communicate()[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;read device response:\n&#123;&#125;&quot;</span></span><br><span class="line">.<span class="built_in">format</span>(resultString))</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">result = parseResponse(resultString.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;raw:\n&quot;</span>,resultString)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;result:\n&quot;</span>,result)</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">traceback.print_exc()</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">setClipboard</span>(<span class="params">data</span>):</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;target.out&quot;</span>,<span class="string">&quot;w+&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">f.write(data)</span><br><span class="line">fetch_clipboard = <span class="string">&quot;cat target.out | xclip -selection c&quot;</span></span><br><span class="line">os.system(fetch_clipboard)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">content = <span class="built_in">input</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;CONTENT:&quot;</span>,content)</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;Calling uid 0 does not own package com.android.shell&quot;</span> <span class="keyword">in</span> content:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;!!!!!!!!!!ERROR FETCHING CLIPBOARD!!!!!!!!!!&quot;</span>)</span><br><span class="line">data = readFromDevice()</span><br><span class="line"><span class="keyword">if</span> data <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">setClipboard(data)</span><br><span class="line"><span class="comment">#        with open(&quot;target.out&quot;,&quot;wb&quot;</span></span><br><span class="line"><span class="comment">#        os.system(fetch_clipboard)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/02/21/a86acd5f-0e9d-4173-882c-3bcc263ed3a8/#more" class="btn btn-default more">Read More</a>
</div>

	       
		     
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2021-12-20 </div>
			<div class="article-title"><a href="/blog/2021/12/20/c0a2ff3b-8a78-4642-bd6d-bd6ad5040bc4/" title="In this article, the author provides a step-by-step guide on how to reinstall Termux and troubleshoot common issues like granting required permissions, fixing the brightness bug by uninstalling a settings app, and removing the Termux banner for a customized experience.">After Termux Reinstallation</a></div>
		</h3>
	


		     
<div class="entry">

  <div class="row">
	
	
		<p>grant permission for termux:api</p>
<p>android.permission.WRITE_SETTINGS can only be granted in settings tab.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/TilesOrganization/support/wiki/How-to-use-ADB-to-grant-permissions">https://github.com/TilesOrganization/support/wiki/How-to-use-ADB-to-grant-permissions</a></p>
<p>adb shell pm grant com.rascarlo.quick.settings.tiles android.permission.WRITE_SECURE_SETTINGS</p>
<p>pm grant com.termux.api android.permission.WRITE_SECURE_SETTINGS</p>
<p>pm list packages</p>
<p>the brightness bug is solved by uninstalling the unintended settings app. i don’t know if this will cause more problems.</p>
<p>to remove termux banner&#x2F; termux welcome message:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> .. &amp;&amp; <span class="built_in">cd</span> usr/etc &amp;&amp; <span class="built_in">rm</span> -rf motd</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2021/12/20/c0a2ff3b-8a78-4642-bd6d-bd6ad5040bc4/#more" class="btn btn-default more">Read More</a>
</div>

	       
	     </div>
	     <div>
	       <center>
	         <div class="pagination">
<ul class="pagination">
	 
</ul>
</div>

	       </center>
	     </div>	
      

</div> <!-- col-md-9/col-md-12 -->


<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/agi_computer_control/" title="Autonomous computer agent" target="_blank"]);">Project Cybergod</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media content automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/prometheous/" title="Automated documentation, AI+IR(RAG)" target="_blank"]);">Project Prometheus</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media Content Automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/my_blog_source/" title="Source code of my blog"" target="_blank"]);">Blog Source Code</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/james4ever0" title="My Github account" target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://samoyedsun.github.io/" title="Samoyedsun's Blog" target="_blank"]);">Samoyedsun&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="http://atlant1c.cn/" title="Atlant1c's Blog" target="_blank"]);">Atlant1c&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://www.gregoryuan.com/" title="Gregoryuan's Blog" target="_blank"]);">Gregoryuan&#39;s Blog</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->




    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2023 James Brown
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/blog/js/jquery.imagesloaded.min.js"></script>
<script src="/blog/js/gallery.js"></script>
<script src="/blog/js/bootstrap.min.js"></script>
<script src="/blog/js/main.js"></script>
<script src="/blog/js/search.js"></script> 


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/blog/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
</html>