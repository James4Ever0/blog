<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 12 | Blog of James Brown</title>
  <meta name="author" content="James Brown">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Blog of James Brown"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/blog/atom.xml" title="Blog of James Brown" type="application/atom+xml">
  
  
    <link href="/blog/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/blog/js/jquery-2.0.3.min.js"></script>
  
  
  <!-- analytics -->
  



<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/blog/">Blog of James Brown</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/blog/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">Blog of James Brown</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		
<div class="slogan">
      <i class="fa fa-heart"></i>
      Autonomous Machines &amp; Society.
</div>


		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-16 </div>
			<div class="article-title"><a href="/blog/2022/12/16/563f6a50-9ae7-4317-9393-0239d30ad2a9/" title="This article explores techniques for improving the performance of GPT-2, a popular language model. By incorporating human feedback and fine-tuning hyperparameters, the model&#39;s capabilities can be further enhanced. Additionally, the article delves into using Pyro, a probabilistic programming framework, to address tasks such as audio segmentation and classification through advanced algorithms like MCMC and variational inference.">pyro audio segmentation and classification</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h2 id="dynamically-wait-and-reload-the-python-code-from-disk-when-runtime-exception-occurs"><a href="#dynamically-wait-and-reload-the-python-code-from-disk-when-runtime-exception-occurs" class="headerlink" title="dynamically wait and reload the python code from disk when runtime exception occurs"></a>dynamically wait and reload the python code from disk when runtime exception occurs</h2><p>One way to achieve this is to use the importlib module to dynamically reload a module at runtime. Here’s an example of how you can do this:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reload_module</span>(<span class="params">module_name: <span class="built_in">str</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">importlib.reload(module_name)</span><br><span class="line"><span class="comment"># Example usage</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">reload_module(<span class="string">&quot;my_module&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Exception occurred: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This will reload the module with the given name at runtime, and if an exception occurs during the reloading process, it will be caught and handled by the except block.</p>
<p>Note that this approach will only work if the module has been imported at least once before, as the importlib.reload() function can only reload modules that are already imported into the current Python environment. If the module has not been imported yet, you will need to use the importlib.import_module() function to import it first.</p>
<p>I hope this helps! Let me know if you have any questions.</p>
<h2 id="optimize-GPT2-output-with-human-feedback"><a href="#optimize-GPT2-output-with-human-feedback" class="headerlink" title="optimize GPT2 output with human feedback"></a>optimize GPT2 output with human feedback</h2><p>There are a few ways you can optimize the output of a GPT-2 model with human feedback. Here are a few options you might consider:</p>
<p>Fine-tuning: One way to optimize the output of a GPT-2 model is to fine-tune it on a specific task or domain using human-labeled data. This involves training the model on a dataset of human-generated text, such as a collection of articles or a corpus of conversational transcripts. Fine-tuning the model can help it learn to produce output that is more relevant and appropriate for the specific task or domain you are interested in.</p>
<p>Evaluating and adjusting model hyperparameters: Another way to optimize the output of a GPT-2 model is to experiment with different model hyperparameters, such as the learning rate, batch size, and number of layers. You can use human feedback to evaluate the quality of the model’s output and adjust these hyperparameters accordingly to improve performance.</p>
<p>Using human feedback to guide model training: In addition to using human feedback to evaluate the model’s output, you can also use it to guide the training process itself. For example, you can use human feedback to identify specific examples or categories of output that the model is struggling with, and then use these examples to create a targeted training dataset for the model. This can help the model learn to produce more accurate and appropriate output for these specific cases.</p>
<p>I hope these suggestions are helpful! Let me know if you have any questions.</p>
<h2 id="train-GPT2-model-to-operate-with-terminal"><a href="#train-GPT2-model-to-operate-with-terminal" class="headerlink" title="train GPT2 model to operate with terminal"></a>train GPT2 model to operate with terminal</h2><p>To train a GPT-2 model to operate with the terminal, you will need to do the following:</p>
<p>Collect a dataset of terminal commands and their associated outputs. This dataset will be used to train the GPT-2 model.</p>
<p>Preprocess the dataset by tokenizing the commands and outputs and creating input-output pairs for training the model.</p>
<p>Train the GPT-2 model using the preprocessed dataset. This can be done using the openai&#x2F;gpt-2 repository on GitHub, which contains the necessary code and instructions for training the model.</p>
<p>Evaluate the performance of the trained model on a separate test dataset of terminal commands and outputs to ensure that it is able to accurately predict the outputs for a given set of commands.</p>
<p>If the model’s performance is not satisfactory, you may need to fine-tune it further by adjusting the training hyperparameters or collecting more data for training.</p>
<p>I hope this helps! Let me know if you have any questions.</p>
<h2 id="what-can-pyro-do"><a href="#what-can-pyro-do" class="headerlink" title="what can pyro do"></a>what can pyro do</h2><p>Pyro is a probabilistic programming language developed by Uber for use in Bayesian machine learning. It allows users to build complex models using simple, high-level abstractions, and provides a suite of tools for working with probability distributions and performing Bayesian inference.</p>
<p>Some of the key features of Pyro include:</p>
<p>Support for a wide range of probability distributions, including continuous and discrete distributions, as well as a variety of common compound distributions such as mixtures and convolutions.</p>
<p>A flexible model construction API that allows users to define complex models using simple, high-level abstractions.</p>
<p>Automatic differentiation and gradient-based optimization algorithms for efficient training of probabilistic models.</p>
<p>Algorithms for performing approximate Bayesian inference, including Markov chain Monte Carlo (MCMC) and variational inference (VI).</p>
<p>Support for parallelization and distributed computing, allowing users to scale their models and inference algorithms to large datasets.</p>
<p>Overall, Pyro is a powerful tool for building and training probabilistic models for machine learning tasks, and is well-suited for a wide range of applications in areas such as natural language processing, computer vision, and time series analysis.</p>
<h2 id="segment-audio-and-classify-audio-with-pyro"><a href="#segment-audio-and-classify-audio-with-pyro" class="headerlink" title="segment audio and classify audio with pyro"></a>segment audio and classify audio with pyro</h2><p>To segment and classify audio using Pyro, you will need to first build a probabilistic model that can process the audio data and make predictions about the segments and class labels. Here are the general steps you can follow:</p>
<p>Preprocess the audio data by converting it to a suitable format for use in the model (e.g., a spectrogram or other feature representation).</p>
<p>Define a probabilistic model in Pyro that takes the audio data as input and makes predictions about the segment boundaries and class labels. This model will likely include a number of latent variables (i.e., variables that are not directly observed, but are inferred from the data) that represent the underlying structure of the audio data.</p>
<p>Use Pyro’s automatic differentiation and gradient-based optimization algorithms to train the model on a dataset of labeled audio segments. This will involve defining a loss function that measures the model’s performance on the training data and adjusting the model parameters to minimize the loss.</p>
<p>Use the trained model to make predictions on new audio data by performing inference using one of Pyro’s approximate inference algorithms, such as Markov chain Monte Carlo (MCMC) or variational inference (VI).</p>
<p>I hope this helps! Let me know if you have any questions.</p>
<h2 id="demonstrate-the-process-with-code"><a href="#demonstrate-the-process-with-code" class="headerlink" title="demonstrate the process with code"></a>demonstrate the process with code</h2><p>Sure! Here is an example of how you might build a probabilistic model in Pyro to segment and classify audio data. This example assumes that you have already preprocessed the audio data and converted it to a suitable format (e.g., a spectrogram) for use in the model.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyro</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="comment"># Define the number of classes and the size of the input data</span></span><br><span class="line">num_classes = <span class="number">10</span></span><br><span class="line">input_size = (batch_size, num_features)</span><br><span class="line"><span class="comment"># Define the model using Pyro&#x27;s primitive distributions</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">audio_classifier</span>(<span class="params">x</span>):</span><br><span class="line"><span class="comment"># Define the latent variables for the segment boundaries and class labels</span></span><br><span class="line">segment_boundaries = pyro.sample(<span class="string">&quot;segment_boundaries&quot;</span>, pyro.distributions.Uniform(<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">class_labels = pyro.sample(<span class="string">&quot;class_labels&quot;</span>, pyro.distributions.Categorical(torch.ones(num_classes)/num_classes))</span><br><span class="line"><span class="comment"># Use the latent variables to define the likelihood of the data</span></span><br><span class="line">likelihood = pyro.sample(<span class="string">&quot;likelihood&quot;</span>, pyro.distributions.Normal(segment_boundaries, class_labels), obs=x)</span><br><span class="line"><span class="keyword">return</span> likelihood</span><br><span class="line"><span class="comment"># Define the optimizer and the loss function</span></span><br><span class="line">optimizer = torch.optim.Adam(audio_classifier.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">loss_fn = pyro.infer.Trace_ELBO().differentiable_loss</span><br><span class="line"><span class="comment"># Loop over the training data and update the model parameters</span></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> training_data:</span><br><span class="line"><span class="comment"># Clear the gradients</span></span><br><span class="line">optimizer.zero_grad()</span><br><span class="line"><span class="comment"># Compute the loss</span></span><br><span class="line">loss = loss_fn(audio_classifier, x, y)</span><br><span class="line"><span class="comment"># Backpropagate the loss and update the model parameters</span></span><br><span class="line">loss.backward()</span><br><span class="line">optimizer.step()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This model defines two latent variables: segment_boundaries, which represents the boundaries between different audio segments, and class_labels, which represents the class labels for each segment. The model then uses these latent variables to define the likelihood of the data (i.e., the probability of observing the audio data given the latent variables).</p>
<p>To perform inference with this model, you can use one of Pyro’s approximate inference algorithms, such as Markov chain Monte Carlo (MCMC) or variational inference (VI). For example, to perform MCMC inference, you can use the pyro.infer.MCMC class as follows:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define the MCMC sampler</span></span><br><span class="line">mcmc = pyro.infer.MCMC(kernel=pyro.infer.NUTS(audio_classifier), num_samples=<span class="number">1000</span>, warmup_steps=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># Run the sampler</span></span><br><span class="line">mcmc.run(x)</span><br><span class="line"><span class="comment"># Extract the samples</span></span><br><span class="line">samples = mcmc.get_samples()</span><br><span class="line"><span class="comment"># Use the samples to estimate the posterior distribution of the latent variables</span></span><br><span class="line">segment_boundaries_posterior = samples[<span class="string">&quot;segment_boundaries&quot;</span>]</span><br><span class="line">class_labels_posterior = samples[<span class="string">&quot;class_labels&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>I hope this example helps to illustrate the process of building and using a probabilistic model for audio segmentation and classification with Pyro. Let me know if you have any questions!</p>

	
	</div>
  <a type="button" href="/blog/2022/12/16/563f6a50-9ae7-4317-9393-0239d30ad2a9/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-16 </div>
			<div class="article-title"><a href="/blog/2022/12/16/aa3eebef-922c-465a-9bbc-767b7e6f2c6b/" title="This article discusses the use of Pyro and PyTorch for tasks such as text generation, object detection, and image watermark removal. The first comment focuses on the importance of hidden states in generating text using Pyro, while the second comment emphasizes training custom datasets and employing RNN/Transformer models for natural language generation with PyTorch.">chatgpt on pyro and pytorch</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>you better train a chatgpt yourself. understand the algorithm.</p>
<p>codegeex is not there yet. maybe you can fine-tune it a little bit?</p>
<h2 id="use-pyro-to-create-a-natural-language-generator"><a href="#use-pyro-to-create-a-natural-language-generator" class="headerlink" title="use pyro to create a natural language generator"></a>use pyro to create a natural language generator</h2><p>Pyro is a probabilistic programming language built on top of PyTorch, which can be used for creating probabilistic models and conducting Bayesian inference. One way you can use Pyro to create a natural language generator is by defining a probabilistic model of the language generation process, and using Monte Carlo sampling or variational inference to generate text.</p>
<p>Here is a basic example of how you might do this using Pyro:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> pyro</span><br><span class="line"><span class="keyword">import</span> pyro.distributions <span class="keyword">as</span> dist</span><br><span class="line"><span class="comment"># Define the vocabulary and size of the language model</span></span><br><span class="line">vocab = [<span class="string">&quot;&lt;START&gt;&quot;</span>, <span class="string">&quot;the&quot;</span>, <span class="string">&quot;cat&quot;</span>, <span class="string">&quot;sat&quot;</span>, <span class="string">&quot;on&quot;</span>, <span class="string">&quot;mat&quot;</span>, <span class="string">&quot;&lt;END&gt;&quot;</span>]</span><br><span class="line">vocab_size = <span class="built_in">len</span>(vocab)</span><br><span class="line"><span class="comment"># Define a simple language model that generates text one word at a time</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">language_model</span>(<span class="params">prefix</span>):</span><br><span class="line"><span class="comment"># Initialize the hidden state with a uniform distribution</span></span><br><span class="line">hidden_state = pyro.sample(<span class="string">&quot;hidden_state&quot;</span>, dist.Uniform(<span class="number">0</span>, vocab_size))</span><br><span class="line"><span class="comment"># Initialize the output sequence with the start token</span></span><br><span class="line">output_sequence = [vocab.index(<span class="string">&quot;&lt;START&gt;&quot;</span>)]</span><br><span class="line"><span class="comment"># Iterate over the prefix and append each word to the output sequence</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> prefix:</span><br><span class="line">output_sequence.append(vocab.index(word))</span><br><span class="line"><span class="comment"># Generate the rest of the sequence one word at a time</span></span><br><span class="line"><span class="keyword">while</span> output_sequence[-<span class="number">1</span>] != vocab.index(<span class="string">&quot;&lt;END&gt;&quot;</span>):</span><br><span class="line"><span class="comment"># Use the hidden state to generate a distribution over the next word</span></span><br><span class="line">next_word_dist = pyro.sample(<span class="string">&quot;next_word&quot;</span>, dist.Categorical(hidden_state))</span><br><span class="line"><span class="comment"># Append the next word to the output sequence</span></span><br><span class="line">output_sequence.append(next_word_dist)</span><br><span class="line"><span class="comment"># Update the hidden state using the next word</span></span><br><span class="line">hidden_state = pyro.sample(<span class="string">&quot;hidden_state&quot;</span>, dist.Uniform(<span class="number">0</span>, vocab_size), obs=next_word_dist)</span><br><span class="line"><span class="comment"># Convert the output sequence to a list of words</span></span><br><span class="line"><span class="keyword">return</span> [vocab[i] <span class="keyword">for</span> i <span class="keyword">in</span> output_sequence]</span><br><span class="line"><span class="comment"># Generate text using the language model</span></span><br><span class="line">generated_text = language_model(prefix=[<span class="string">&quot;the&quot;</span>, <span class="string">&quot;cat&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(generated_text)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This example defines a simple language model that generates text one word at a time, using a hidden state to produce a distribution over the next word in the sequence. The model starts by initializing the hidden state with a uniform distribution, and then iteratively generates words until it reaches the end token. You can use Monte Carlo sampling or variational inference to generate text from this model by calling pyro.sample on the model and specifying the desired number of samples.</p>
<p>I hope this helps! Let me know if you have any questions.</p>
<h2 id="use-pyro-to-create-a-natural-language-generator-with-loss-function-like-adam"><a href="#use-pyro-to-create-a-natural-language-generator-with-loss-function-like-adam" class="headerlink" title="use pyro to create a natural language generator, with loss function like adam"></a>use pyro to create a natural language generator, with loss function like adam</h2><p>To use Pyro to create a natural language generator with a loss function like Adam, you will need to define a probabilistic model that takes in some input data and generates text, and then define a loss function that compares the generated text to some target text. You can then use an optimization algorithm like Adam to minimize the loss function and optimize the parameters of your model.</p>
<p>Here is an example of how you might do this using Pyro:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> pyro</span><br><span class="line"><span class="keyword">import</span> pyro.distributions <span class="keyword">as</span> dist</span><br><span class="line"><span class="keyword">from</span> pyro.optim <span class="keyword">import</span> Adam</span><br><span class="line"><span class="comment"># Define the vocabulary and size of the language model</span></span><br><span class="line">vocab = [<span class="string">&quot;&lt;START&gt;&quot;</span>, <span class="string">&quot;the&quot;</span>, <span class="string">&quot;cat&quot;</span>, <span class="string">&quot;sat&quot;</span>, <span class="string">&quot;on&quot;</span>, <span class="string">&quot;mat&quot;</span>, <span class="string">&quot;&lt;END&gt;&quot;</span>]</span><br><span class="line">vocab_size = <span class="built_in">len</span>(vocab)</span><br><span class="line"><span class="comment"># Define a simple language model that generates text one word at a time</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">language_model</span>(<span class="params">prefix</span>):</span><br><span class="line"><span class="comment"># Initialize the hidden state with a uniform distribution</span></span><br><span class="line">hidden_state = pyro.sample(<span class="string">&quot;hidden_state&quot;</span>, dist.Uniform(<span class="number">0</span>, vocab_size))</span><br><span class="line"><span class="comment"># Initialize the output sequence with the start token</span></span><br><span class="line">output_sequence = [vocab.index(<span class="string">&quot;&lt;START&gt;&quot;</span>)]</span><br><span class="line"><span class="comment"># Iterate over the prefix and append each word to the output sequence</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> prefix:</span><br><span class="line">output_sequence.append(vocab.index(word))</span><br><span class="line"><span class="comment"># Generate the rest of the sequence one word at a time</span></span><br><span class="line"><span class="keyword">while</span> output_sequence[-<span class="number">1</span>] != vocab.index(<span class="string">&quot;&lt;END&gt;&quot;</span>):</span><br><span class="line"><span class="comment"># Use the hidden state to generate a distribution over the next word</span></span><br><span class="line">next_word_dist = pyro.sample(<span class="string">&quot;next_word&quot;</span>, dist.Categorical(hidden_state))</span><br><span class="line"><span class="comment"># Append the next word to the output sequence</span></span><br><span class="line">output_sequence.append(next_word_dist)</span><br><span class="line"><span class="comment"># Update the hidden state using the next word</span></span><br><span class="line">hidden_state = pyro.sample(<span class="string">&quot;hidden_state&quot;</span>, dist.Uniform(<span class="number">0</span>, vocab_size), obs=next_word_dist)</span><br><span class="line"><span class="comment"># Convert the output sequence to a list of words</span></span><br><span class="line"><span class="keyword">return</span> [vocab[i] <span class="keyword">for</span> i <span class="keyword">in</span> output_sequence]</span><br><span class="line"><span class="comment"># Define a loss function that compares the generated text to some target text</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loss_fn</span>(<span class="params">generated_text, target_text</span>):</span><br><span class="line"><span class="comment"># Compute the cross-entropy loss between the generated text and the target text</span></span><br><span class="line"><span class="keyword">return</span> -torch.<span class="built_in">sum</span>(torch.tensor([vocab.index(word) <span class="keyword">for</span> word <span class="keyword">in</span> target_text]) * torch.log(torch.tensor([vocab.index(word) <span class="keyword">for</span> word <span class="keyword">in</span> generated_text])))</span><br><span class="line"><span class="comment"># Optimize the parameters of the language model using Adam</span></span><br><span class="line">optimizer = Adam(&#123;<span class="string">&quot;lr&quot;</span>: <span class="number">0.001</span>&#125;)</span><br><span class="line"><span class="comment"># Set the number of training iterations</span></span><br><span class="line">num_iterations = <span class="number">1000</span></span><br><span class="line"><span class="comment"># Use Pyro&#x27;s SVI to optimize the parameters of the language model</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_iterations):</span><br><span class="line"><span class="comment"># Clear the gradient</span></span><br><span class="line">optimizer.zero_grad()</span><br><span class="line"><span class="comment"># Generate some text using the language model</span></span><br><span class="line">generated_text = language_model(prefix=[<span class="string">&quot;the&quot;</span>, <span class="string">&quot;cat&quot;</span>])</span><br><span class="line"><span class="comment"># Compute the loss</span></span><br><span class="line">loss = loss_fn(generated_text, target_text)</span><br><span class="line"><span class="comment"># Compute the gradients</span></span><br><span class="line">loss.backward()</span><br><span class="line"><span class="comment"># Update the parameters</span></span><br><span class="line">optimizer.step()</span><br><span class="line"><span class="comment"># Generate text using the optimized language model</span></span><br><span class="line">generated_text = language_model(prefix=[<span class="string">&quot;the&quot;</span>, <span class="string">&quot;cat&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(generated_text)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This code uses Pyro’s Stochastic Variational Inference (SVI) to optimize the parameters of the language model using the Adam optimizer. The model is trained by generating text using the current parameters of the model, computing the loss between the generated text and the target text, and then updating the parameters based on the gradients of the loss with respect to the model parameters.</p>
<p>After training, you can use the optimized language model to generate text by calling language_model with the desired prefix as input.</p>
<p>I hope this helps! Let me know if you have any questions.</p>
<h2 id="use-pyro-to-generate-natural-language-using-advanced-models"><a href="#use-pyro-to-generate-natural-language-using-advanced-models" class="headerlink" title="use pyro to generate natural language using advanced models"></a>use pyro to generate natural language using advanced models</h2><p>There are several advanced probabilistic models that you can use with Pyro to generate natural language. Some examples include:</p>
<p>Recurrent neural network (RNN) language models: These models use an RNN to process the input sequence and generate a probability distribution over the next word in the sequence. You can use Pyro to define an RNN language model by using the pyro.nn module to define the RNN and the pyro.distributions module to define the distribution over the next word.</p>
<p>Transformer language models: These models use a transformer architecture to process the input sequence and generate a probability distribution over the next word in the sequence. You can use Pyro to define a transformer language model by using the pyro.nn module to define the transformer and the pyro.distributions module to define the distribution over the next word.</p>
<p>Variational autoencoder (VAE) language models: These models use a VAE to learn a latent representation of the input sequence, and then use the latent representation to generate a probability distribution over the next word in the sequence. You can use Pyro to define a VAE language model by using the pyro.nn module to define the VAE and the pyro.distributions module to define the distribution over the next word.</p>
<p>To use any of these models with Pyro, you will need to define a probabilistic model that takes in some input data and generates text, and then use Monte Carlo sampling or variational inference to generate text from the model. You can also define a loss function and use an optimization algorithm like Adam to optimize the parameters of the model.</p>
<p>I hope this helps! Let me know if you have any questions.</p>
<h2 id="determine-topic-among-a-large-group-of-entities-with-labels-with-pyro"><a href="#determine-topic-among-a-large-group-of-entities-with-labels-with-pyro" class="headerlink" title="determine topic among a large group of entities with labels with pyro"></a>determine topic among a large group of entities with labels with pyro</h2><p>To determine the topic among a large group of entities with labels using Pyro, you can use a technique called topic modeling. Pyro is a probabilistic programming language that allows you to build and perform inference on probabilistic models.</p>
<p>One way to perform topic modeling using Pyro is to use a probabilistic graphical model called a Latent Dirichlet Allocation (LDA) model. In an LDA model, you can specify the number of topics and the number of words in each topic, and the model will learn the distribution of words that are likely to belong to each topic.</p>
<p>To implement an LDA model in Pyro, you will first need to define the model and the priors for the parameters. This can be done using the pyro.sample() function, which allows you to specify the probability distribution for the parameters. You can then use the pyro.infer.MCMC() function to perform Markov Chain Monte Carlo (MCMC) inference on the model, which will allow you to estimate the posterior distribution of the model parameters.</p>
<p>Once you have trained the model, you can use it to classify a new document by using the pyro.predict() function and passing in the document’s words as input. The model will return the probability that the document belongs to each of the specified topics.</p>
<p>For more detailed information on how to implement topic modeling using Pyro, you can refer to the Pyro documentation or tutorials online.</p>
<h2 id="how-to-determine-watermark-location-and-remove-watermark-at-location-with-several-screenshots-in-a-video-with-pytorch"><a href="#how-to-determine-watermark-location-and-remove-watermark-at-location-with-several-screenshots-in-a-video-with-pytorch" class="headerlink" title="how to determine watermark location and remove watermark at location with several screenshots in a video with pytorch"></a>how to determine watermark location and remove watermark at location with several screenshots in a video with pytorch</h2><p>To determine the location of a watermark in a video with multiple screenshots and remove the watermark using PyTorch, you can use a technique called image inpainting. Image inpainting is a process of filling in missing or damaged pixels in an image or video to restore it to its original form.</p>
<p>One way to perform image inpainting using PyTorch is to use a convolutional neural network (CNN) to learn the structure and patterns in the image or video. You can train the CNN to predict the missing or damaged pixels based on the surrounding pixels.</p>
<p>To implement image inpainting using PyTorch, you will need to first prepare a dataset of images or video frames with and without the watermark. You can then use this dataset to train the CNN using the PyTorch API. You can use the PyTorch optimizers and loss functions to optimize the network and improve its performance.</p>
<p>Once the CNN is trained, you can use it to predict the missing or damaged pixels in a new image or video frame with a watermark. You can then remove the watermark by replacing the predicted pixels with the original pixels from the image or video frame without the watermark.</p>
<p>For more detailed information on how to implement image inpainting using PyTorch, you can refer to the PyTorch documentation or tutorials online.</p>
<h2 id="how-to-determine-watermark-location-in-a-series-of-screenshots-in-video-with-pytorch"><a href="#how-to-determine-watermark-location-in-a-series-of-screenshots-in-video-with-pytorch" class="headerlink" title="how to determine watermark location in a series of screenshots in video with pytorch"></a>how to determine watermark location in a series of screenshots in video with pytorch</h2><p>To determine the location of a watermark in a series of screenshots in a video using PyTorch, you can use a technique called object detection. Object detection is a process of identifying and localizing objects in an image or video.</p>
<p>One way to perform object detection using PyTorch is to use a convolutional neural network (CNN) to learn the features and patterns in the image or video. You can train the CNN to predict the presence and location of objects in the image or video.</p>
<p>To implement object detection using PyTorch, you will need to first prepare a dataset of images or video frames with and without the watermark. You can then use this dataset to train the CNN using the PyTorch API. You can use the PyTorch optimizers and loss functions to optimize the network and improve its performance.</p>
<p>Once the CNN is trained, you can use it to detect the presence and location of the watermark in a new image or video frame. You can then use the predicted bounding box coordinates to determine the location of the watermark in the image or video frame.</p>
<p>For more detailed information on how to implement object detection using PyTorch, you can refer to the PyTorch documentation or tutorials online.</p>
<h2 id="the-data-is-a-series-of-images-not-a-single-image"><a href="#the-data-is-a-series-of-images-not-a-single-image" class="headerlink" title="the data is a series of images, not a single image"></a>the data is a series of images, not a single image</h2><p>If you have a series of images and you want to determine the location of a watermark in each of the images using PyTorch, you can use a technique called object detection. Object detection is a process of identifying and localizing objects in an image or video.</p>
<p>One way to perform object detection using PyTorch is to use a convolutional neural network (CNN) to learn the features and patterns in the images. You can train the CNN to predict the presence and location of objects in the images.</p>
<p>To implement object detection using PyTorch, you will need to first prepare a dataset of images with and without the watermark. You can then use this dataset to train the CNN using the PyTorch API. You can use the PyTorch optimizers and loss functions to optimize the network and improve its performance.</p>
<p>Once the CNN is trained, you can use it to detect the presence and location of the watermark in each of the images in the series. You can then use the predicted bounding box coordinates to determine the location of the watermark in each image.</p>
<p>For more detailed information on how to implement object detection using PyTorch, you can refer to the PyTorch documentation or tutorials online.</p>
<h2 id="how-to-put-a-series-of-image-into-a-single-CNN-show-me-the-code"><a href="#how-to-put-a-series-of-image-into-a-single-CNN-show-me-the-code" class="headerlink" title="how to put a series of image into a single CNN, show me the code"></a>how to put a series of image into a single CNN, show me the code</h2><p>To put a series of images into a single CNN using PyTorch, you can use the PyTorch Dataset and DataLoader classes. These classes allow you to create a custom dataset and load the data in small batches for training or inference.</p>
<p>Here is an example of how you can create a custom dataset for a series of images and use it with a CNN in PyTorch:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImageDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, root_dir, transform=<span class="literal">None</span></span>):</span><br><span class="line">self.root_dir = root_dir</span><br><span class="line">self.transform = transform</span><br><span class="line">self.image_names = os.listdir(self.root_dir)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(self.image_names)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">image_name = self.image_names[idx]</span><br><span class="line">image_path = os.path.join(self.root_dir, image_name)</span><br><span class="line">image = Image.<span class="built_in">open</span>(image_path).convert(<span class="string">&#x27;RGB&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> self.transform:</span><br><span class="line">image = self.transform(image)</span><br><span class="line"><span class="keyword">return</span> image</span><br><span class="line"><span class="comment"># Create the dataset and dataloader</span></span><br><span class="line">dataset = ImageDataset(root_dir=<span class="string">&#x27;path/to/images&#x27;</span>)</span><br><span class="line">dataloader = DataLoader(dataset, batch_size=<span class="number">32</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># Define the CNN model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CNN</span>(torch.nn.Module):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line"><span class="built_in">super</span>(CNN, self).__init__()</span><br><span class="line">self.conv1 = torch.nn.Conv2d(<span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">self.pool = torch.nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">self.conv2 = torch.nn.Conv2d(<span class="number">6</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">self.fc1 = torch.nn.Linear(<span class="number">16</span> * <span class="number">5</span> * <span class="number">5</span>, <span class="number">120</span>)</span><br><span class="line">self.fc2 = torch.nn.Linear(<span class="number">120</span>, <span class="number">84</span>)</span><br><span class="line">self.fc3 = torch.nn.Linear(<span class="number">84</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">x = self.pool(F.relu(self.conv1(x)))</span><br><span class="line">x = self.pool(F.relu(self.conv2(x)))</span><br><span class="line">x = x.view(-<span class="number">1</span>, <span class="number">16</span> * <span class="number">5</span> * <span class="number">5</span>)</span><br><span class="line">x = F.relu(self.fc1(x))</span><br><span class="line">x = F.relu(self.fc2(x))</span><br><span class="line">x = self.fc3(x)</span><br><span class="line"><span class="keyword">return</span> x</span><br><span class="line"><span class="comment"># Create the model and optimizer</span></span><br><span class="line">model = CNN()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.001</span>, momentum=<span class="number">0.9</span>)</span><br><span class="line"><span class="comment"># Loop through the dataloader and train the model</span></span><br><span class="line"><span class="keyword">for</span> images, labels <span class="keyword">in</span> dataloader:</span><br><span class="line">optimizer.zero_grad()</span><br><span class="line">outputs = model(images)</span><br><span class="line">loss = criterion(outputs, labels)</span><br><span class="line">loss.backward()</span><br><span class="line">optimizer.step()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, the ImageDataset class extends the PyTorch Dataset class and is used to load the images from a root directory. The DataLoader class is used to load the data in small batches and shuffle</p>
<h2 id="use-pyro-to-generate-natural-language"><a href="#use-pyro-to-generate-natural-language" class="headerlink" title="use pyro to generate natural language"></a>use pyro to generate natural language</h2><p>To generate natural language using Pyro, you can use a technique called language modeling. Language modeling is the process of predicting the next word in a sequence of words given the previous words.</p>
<p>One way to perform language modeling using Pyro is to use a probabilistic graphical model called a recurrent neural network (RNN) language model. In an RNN language model, the probability of each word in the sequence is modeled as a function of the previous words in the sequence.</p>
<p>To implement an RNN language model in Pyro, you will first need to define the model and the priors for the parameters. This can be done using the pyro.sample() function, which allows you to specify the probability distribution for the parameters. You can then use the pyro.infer.SVI() function to perform stochastic variational inference on the model, which will allow you to estimate the posterior distribution of the model parameters.</p>
<p>Once you have trained the model, you can use it to generate natural language by feeding it a seed word or phrase and using the model to predict the next word in the sequence. You can then use the predicted word as the input for the next iteration, and continue generating the sequence until you reach the desired length.</p>
<p>For more detailed information on how to implement language modeling using Pyro, you can refer to the Pyro documentation or tutorials online.</p>

	
	</div>
  <a type="button" href="/blog/2022/12/16/aa3eebef-922c-465a-9bbc-767b7e6f2c6b/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-15 </div>
			<div class="article-title"><a href="/blog/2022/12/15/a40af93d-6ad7-4f21-b874-5391fc45fa2e/" title="The reset-usb.sh script is a solution to hard disk detection issues in Linux, specifically addressing USB controller problems. It works by utilizing sub-scripts and a for loop to unbind and rebind the controllers, with suggested enhancements for Kali Linux.">reset usb</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>the same for <code>/sys/bus/usb/drivers/*</code>.</p>
<hr>
<p>in case kali failed to detect presence of hard disks, shall you pop up a dialog for us to decide whether to reset to usb or not.</p>
<h2 id="reset-usb-sh"><a href="#reset-usb-sh" class="headerlink" title="reset-usb.sh"></a>reset-usb.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">reset-ahci-controllers.sh</span><br><span class="line">reset-xhci-controllers.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="reset-ahci-controllers-sh"><a href="#reset-ahci-controllers-sh" class="headerlink" title="reset-ahci-controllers.sh"></a>reset-ahci-controllers.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># this freaking works.</span></span><br><span class="line"><span class="comment"># Script to reset all local xHCI (USB) controllers</span></span><br><span class="line"><span class="comment"># Based on: http://billauer.co.il/blog/2013/02/usb-reset-ehci-uhci-linux/</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;EUID&#125;</span> != 0 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> This must be run as root!</span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">for</span> xhci <span class="keyword">in</span> /sys/bus/pci/drivers/ahci; <span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">cd</span> <span class="variable">$&#123;xhci&#125;</span>; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Weird error. Failed to change directory to <span class="variable">$&#123;xhci&#125;</span>.&quot;</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Resetting devices from <span class="variable">$&#123;xhci&#125;</span>...&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ????:??:??.?; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; unbind</span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; <span class="built_in">bind</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="reset-xhci-controllers-sh"><a href="#reset-xhci-controllers-sh" class="headerlink" title="reset-xhci-controllers.sh"></a>reset-xhci-controllers.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># this freaking works.</span></span><br><span class="line"><span class="comment"># Script to reset all local xHCI (USB) controllers</span></span><br><span class="line"><span class="comment"># Based on: http://billauer.co.il/blog/2013/02/usb-reset-ehci-uhci-linux/</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;EUID&#125;</span> != 0 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> This must be run as root!</span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">for</span> xhci <span class="keyword">in</span> /sys/bus/pci/drivers/?hci_hcd; <span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">cd</span> <span class="variable">$&#123;xhci&#125;</span>; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Weird error. Failed to change directory to <span class="variable">$&#123;xhci&#125;</span>.&quot;</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Resetting devices from <span class="variable">$&#123;xhci&#125;</span>...&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ????:??:??.?; <span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; unbind</span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> &gt; <span class="built_in">bind</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/12/15/a40af93d-6ad7-4f21-b874-5391fc45fa2e/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-15 </div>
			<div class="article-title"><a href="/blog/2022/12/15/062d0daa-79a1-4d08-9940-1716178b767c/" title="This guide offers tutorials in Java and Kotlin, covering patterns like Java Stream, list comprehension, switch expressions, and iterating through lists with indices. Additionally, it discusses eclipse and JetBrains plugin support for BeanShell syntax highlighting. The guide also teaches various methods to count array element occurrences in both languages.">useful java patterns</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p><a target="_blank" rel="noopener" href="https://stackify.com/streams-guide-java-8/">java stream guide</a></p>
<p>learn java and kotlin the same time?</p>
<p>beanshell syntax highlight seems to be rare. beanshell workspace has the highlight.</p>
<p>use v2.1.1 and above for varargs support.</p>
<p>there are eclipse and <a target="_blank" rel="noopener" href="https://github.com/perNyfelt/beanshell-intellij-plugin">jetbrains</a> plugin support for beanshell.</p>
<h2 id="creating-lists"><a href="#creating-lists" class="headerlink" title="creating lists"></a>creating lists</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line"><span class="type">var</span> <span class="variable">mset</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">mset.addAll(a);</span><br><span class="line"><span class="type">var</span> <span class="variable">mset2</span> <span class="operator">=</span> a.stream().collect(Collectors.toSet());</span><br><span class="line"><span class="type">var</span> <span class="variable">mymin</span> <span class="operator">=</span> Collections.min(a);</span><br><span class="line"><span class="type">var</span> <span class="variable">mymax</span> <span class="operator">=</span> Collections.max(a);</span><br><span class="line">Collections.reverse(a);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = arrayOf(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">print(a.contentToString())</span><br><span class="line">print(a.max())</span><br><span class="line">print(a.min())</span><br><span class="line">a.reverse()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="creating-hashmap"><a href="#creating-hashmap" class="headerlink" title="creating hashmap"></a>creating hashmap</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ah= <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">ah.put(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ah = hashMapOf(<span class="number">1</span> to <span class="number">2</span>, <span class="number">2</span> to <span class="number">3</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="iterate-lists-with-indices"><a href="#iterate-lists-with-indices" class="headerlink" title="iterate lists with indices"></a>iterate lists with indices</h2><p>java double colon <code>::</code> operator acts as anonymous function</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">l</span> <span class="operator">=</span> a.listIterator();</span><br><span class="line"><span class="keyword">while</span> (l.hasNext())&#123;</span><br><span class="line"><span class="type">var</span> <span class="variable">index</span> <span class="operator">=</span> l.nextIndex();</span><br><span class="line"><span class="type">var</span> <span class="variable">val</span> <span class="operator">=</span> l.next();</span><br><span class="line">System.out.println(<span class="string">&quot;INDEX: &quot;</span>+index+<span class="string">&quot; ELEM: &quot;</span>+val);</span><br><span class="line">&#125;</span><br><span class="line">IntStream.range(<span class="number">0</span>,a.size()).forEach(index -&gt; a.get(index));</span><br><span class="line"><span class="keyword">var</span> index=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i: a)&#123;</span><br><span class="line">index++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a.forEachIndexed&#123;ind, elem -&gt; println(<span class="string">&quot;index? <span class="variable">$ind</span>&quot;</span>); println(<span class="string">&quot;elem? <span class="variable">$elem</span>&quot;</span>)&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> a.indices)&#123;</span><br><span class="line"><span class="keyword">var</span> elem = a[i]</span><br><span class="line">&#125;</span><br><span class="line">a.indices.forEach &#123;</span><br><span class="line"><span class="keyword">var</span> elem = a[it]</span><br><span class="line">elem</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="list-comprehension"><a href="#list-comprehension" class="headerlink" title="list comprehension"></a>list comprehension</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">mlist</span> <span class="operator">=</span> a.stream().map(x-&gt; x*<span class="number">2</span>).collect(Collectors.toList());</span><br><span class="line"><span class="type">var</span> <span class="variable">evenNums</span> <span class="operator">=</span> a.stream().filter(x-&gt; x%<span class="number">2</span> == <span class="number">0</span>).collect(Collectors.toList());</span><br><span class="line"><span class="type">var</span> <span class="variable">mmap</span> <span class="operator">=</span> a.stream().collect(Collectors.toMap(x-&gt;x.getId(),x-&gt;x.getName()));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="switch-expressions"><a href="#switch-expressions" class="headerlink" title="switch expressions"></a>switch expressions</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">val</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="type">var</span> <span class="variable">mswitch</span> <span class="operator">=</span> <span class="keyword">switch</span> (val)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> -&gt; &#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&quot;good&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> -&gt; &#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&quot;bad&quot;</span>;</span><br><span class="line">&#125; <span class="comment">// either throw or yield.</span></span><br><span class="line"><span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;out of expectation&quot;</span>);</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&quot;really bad&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">System.out.println(mswitch);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> grade = <span class="number">30</span></span><br><span class="line"><span class="keyword">var</span> res =  <span class="keyword">when</span>(grade) &#123;</span><br><span class="line"><span class="keyword">in</span> <span class="number">0.</span><span class="number">.40</span> -&gt; <span class="string">&quot;Fail&quot;</span></span><br><span class="line"><span class="keyword">in</span> <span class="number">41.</span><span class="number">.70</span> -&gt; <span class="string">&quot;Pass&quot;</span></span><br><span class="line"><span class="keyword">in</span> <span class="number">71.</span><span class="number">.100</span> -&gt; <span class="string">&quot;Distinction&quot;</span></span><br><span class="line"><span class="keyword">else</span> -&gt; <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">print(res)</span><br><span class="line"><span class="keyword">var</span> mcase = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="keyword">when</span>(mcase)&#123;</span><br><span class="line"><span class="number">1</span> -&gt; <span class="string">&quot;good&quot;</span></span><br><span class="line"><span class="number">2</span> -&gt; <span class="string">&quot;bad&quot;</span></span><br><span class="line"><span class="keyword">else</span> -&gt; <span class="string">&quot;really bad&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">print(res)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="count-occurance-of-elements-in-array"><a href="#count-occurance-of-elements-in-array" class="headerlink" title="count occurance of elements in array"></a>count occurance of elements in array</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String[] array = &#123;<span class="string">&quot;name1&quot;</span>,<span class="string">&quot;name2&quot;</span>,<span class="string">&quot;name3&quot;</span>,<span class="string">&quot;name4&quot;</span>, <span class="string">&quot;name5&quot;</span>, <span class="string">&quot;name2&quot;</span>&#125;;</span><br><span class="line">Arrays.stream(array)</span><br><span class="line">.collect(Collectors.groupingBy(s -&gt; s))</span><br><span class="line">.forEach((k, v) -&gt; System.out.println(k+<span class="string">&quot; &quot;</span>+v.size()));</span><br><span class="line"><span class="type">List</span> <span class="variable">asList</span> <span class="operator">=</span> Arrays.asList(array);</span><br><span class="line">Set&lt;String&gt; mySet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;(asList);</span><br><span class="line"><span class="keyword">for</span>(String s: mySet)&#123;</span><br><span class="line">System.out.println(s + <span class="string">&quot; &quot;</span> + Collections.frequency(asList,s));</span><br><span class="line">&#125;</span><br><span class="line">Map&lt;String, Long&gt; map = Arrays.stream(array)</span><br><span class="line">.collect(Collectors.groupingBy(s -&gt; s, Collectors.counting()));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = arrayOf(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">a.toSet().forEach&#123;it -&gt; println(<span class="string">&quot;elem? <span class="variable">$it</span>&quot;</span>); println(<span class="string">&quot;count? &quot;</span>+a.count&#123;it2-&gt;it2 == it&#125;)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="lambdas"><a href="#lambdas" class="headerlink" title="lambdas"></a>lambdas</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Consumer</span> <span class="variable">mcons</span> <span class="operator">=</span> (n) -&gt; &#123;System.out.println(n);&#125;</span><br><span class="line">mcons.andThen(mcons).accept(<span class="string">&quot;mval&quot;</span>);</span><br><span class="line">Function &lt;Integer,Integer&gt; mfunc = n-&gt; n+<span class="number">1</span>;</span><br><span class="line"><span class="type">Supplier</span> <span class="variable">msup</span> <span class="operator">=</span> () -&gt; <span class="number">1</span>;</span><br><span class="line"><span class="type">var</span> <span class="variable">mval</span> <span class="operator">=</span> msup.get();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mfunc = &#123;n :<span class="built_in">Int</span> -&gt; n+<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> mprint = &#123;n:Any -&gt; print(n)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2022/12/15/062d0daa-79a1-4d08-9940-1716178b767c/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-13 </div>
			<div class="article-title"><a href="/blog/2022/12/13/8d61fc58-e855-4fe0-ade9-be7fdcb60af0/" title="The text explores package managers for less common languages, such as Conan, CLibs, and Vcpkg. It also delves into JVM alternatives like Kotlin, Scala, Groovy, and Clojure. Furthermore, it covers tools like javac doc and GraalVM&#39;s polyglot, which facilitate language integration.">rare package managers, alternative jvm languages and java study hints</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h2 id="package-managers"><a href="#package-managers" class="headerlink" title="package managers"></a>package managers</h2><h3 id="c-c"><a href="#c-c" class="headerlink" title="c, c++"></a>c, c++</h3><p><a target="_blank" rel="noopener" href="https://conan.io/">conan</a></p>
<p><a target="_blank" rel="noopener" href="https://www.clibs.org/">clibs</a></p>
<p><a target="_blank" rel="noopener" href="https://vcpkg.io/en/index.html">vcpkg</a></p>
<h3 id="lisp"><a href="#lisp" class="headerlink" title="lisp"></a>lisp</h3><p><a target="_blank" rel="noopener" href="https://www.clpm.dev/">CLPM</a> powered by quicklisp</p>
<h2 id="jvm-alternative-languages"><a href="#jvm-alternative-languages" class="headerlink" title="jvm alternative languages"></a>jvm alternative languages</h2><p><a target="_blank" rel="noopener" href="https://www.oracle.com/technical-resources/articles/java/architect-languages.html">oracle’s blog on jvm languages</a> showing advantages</p>
<p><a target="_blank" rel="noopener" href="https://www.ringojs.org/documentation/">RingoJS</a></p>
<p><a target="_blank" rel="noopener" href="https://kotlinlang.org/">Kotlin</a></p>
<p><a target="_blank" rel="noopener" href="https://www.scala-lang.org/">Scala</a></p>
<p><a target="_blank" rel="noopener" href="http://www.groovy-lang.org/">Groovy</a></p>
<p><a target="_blank" rel="noopener" href="https://clojure.org/">Clojure</a></p>
<p>Fantom</p>
<p><a target="_blank" rel="noopener" href="https://ceylon-lang.org/">Ceylon</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jython.org/">Jython</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jruby.org/">JRuby</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Frege/frege">Frege</a> haskell on jvm</p>
<p>Xtend</p>
<p><a target="_blank" rel="noopener" href="https://golo-lang.org/">Golo</a></p>
<p>Concurnaas</p>
<p>Yeti</p>
<p><a target="_blank" rel="noopener" href="https://github.com/oracle/graal">GraalVM</a> uses polyglot to bridge with other languages</p>
<h2 id="java-hints"><a href="#java-hints" class="headerlink" title="java hints"></a>java hints</h2><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/18/docs/specs/man/javac.html#arrangement-of-source-code-for-a-package">javac doc</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/10/jshell/introduction-jshell.htm">jshell</a></p>
<p><a target="_blank" rel="noopener" href="https://www.oracle.com/technical-resources/articles/java/jf14-nashorn.html">nashorn js engine</a> run it with <code>jjs</code></p>

	
	</div>
  <a type="button" href="/blog/2022/12/13/8d61fc58-e855-4fe0-ade9-be7fdcb60af0/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-13 </div>
			<div class="article-title"><a href="/blog/2022/12/13/94e9bb2c-2801-4096-87dd-800e0d951d9f/" title="Web scraping is the process of extracting data from websites by selecting targets and utilizing proxies or cookies for access, storing the content in compatible formats, categorizing it, and linking it for efficient retrieval.">web scraping logic</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>select targets for scraping. it could be your browsing history, package indexs, social media (dynamic contents, with different accessing methods than web scraping)</p>
<p>if not accessible, access it with proxies, cookies.</p>
<p>finally store the content into compat and usable formats, categorized and linked</p>

	
	</div>
  <a type="button" href="/blog/2022/12/13/94e9bb2c-2801-4096-87dd-800e0d951d9f/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-13 </div>
			<div class="article-title"><a href="/blog/2022/12/13/02c2d0b5-9e22-4cc6-8d78-c40eca582fc0/" title="This article discusses an efficient method for updating a search engine using advanced tools such as docprompting, ColBERT, and RoBERTa. The process involves managing file lists, scanning new files based on the index, merging, saving, and removing old indexes while also handling large datasets in minibatches when necessary.">lazero search engine update logic</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p><a target="_blank" rel="noopener" href="https://github.com/shuyanzhou/docprompting">docprompting</a> generate code from doc retrieval, using <a target="_blank" rel="noopener" href="https://github.com/tldr-pages/tldr">tldr</a> and <a target="_blank" rel="noopener" href="https://conala-corpus.github.io/">CoNaLa</a> for training code generation from prompt</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@varun030403/colbert-a-complete-guide-1552468335ae">ColBERT</a> and <a target="_blank" rel="noopener" href="https://medium.com/dataseries/roberta-robustly-optimized-bert-pretraining-approach-d033464bd946">RoBERTa</a> for document retrieval and embedding</p>
<p>the update process shall be atomic. when the update is successful, there should be a file created under index directory. always check the newest index first. cleanup unusable&#x2F;incompatible indexs.</p>
<p>if there’s no previous compatible index present, make index from group up, clean up incompatible index if necessary. if previous compatible index is found, decompose it into small groups, waiting for merge and update.</p>
<p>first checksum all files along with file names. if file is present with matched checksum, don’t touch it, or either remove it from index, create new index or replace index.</p>
<p>next create or merge file list.</p>
<p>then we scan those new files then act accordingly to our index.</p>
<p>finally we merge our index, save to a different place, place the flag, remove the flag of old index then remove old index completely. if merge is not possible for huge datasource, we perform search in minibatches.</p>

	
	</div>
  <a type="button" href="/blog/2022/12/13/02c2d0b5-9e22-4cc6-8d78-c40eca582fc0/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-13 </div>
			<div class="article-title"><a href="/blog/2022/12/13/4d2a5ef4-ee90-435d-87e1-b8d994f27fd8/" title="Popular AI competition platforms that support notebooks include 阿里天池, Datafountain, 和鲸社区, Kaggle, and Aistudio.">popular ai competition platforms (may with notebook support)</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>i’ve seen these platforms from <a target="_blank" rel="noopener" href="https://github.com/DLLXW/data-science-competition">a personal competition solution collection</a></p>
<p><a target="_blank" rel="noopener" href="https://tianchi.aliyun.com/">阿里天池</a></p>
<p><a target="_blank" rel="noopener" href="https://www.datafountain.cn/">datafountain</a></p>
<p><a target="_blank" rel="noopener" href="https://www.heywhale.com/">和鲸社区</a></p>
<p>kaggle</p>
<p>aistudio</p>

	
	</div>
  <a type="button" href="/blog/2022/12/13/4d2a5ef4-ee90-435d-87e1-b8d994f27fd8/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-13 </div>
			<div class="article-title"><a href="/blog/2022/12/13/e270170a-1520-4c18-af65-f9c4cc62a93e/" title="This article compares Dubbo and Python&#39;s XML-RPC as remote procedure call technologies, discussing their capabilities in handling native structures like numpy arrays. It also provides tutorial links for detecting if Dubbo services are functioning normally, along with warnings against ads when opening specific URLs.">dubbo and python xmlrpc</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>they are both remote procedure calls.</p>
<p>you can ship things across internet, but remember it can’t be some “native” structure like numpy array.</p>
<p>python <a target="_blank" rel="noopener" href="https://wiki.python.org/moin/XmlRpc">xmlrpc</a> tutorial and <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/xmlrpc.server.html">xmlrpc.server</a> mentions <a target="_blank" rel="noopener" href="http://c2.com/cgi/wiki?XmlRpc">c2 wiki</a> which you have scraped before. where is it, along with all other things you have scraped? believe it is in that AGI directory since you are such an archivist at that time.</p>
<p>tutorials on how to detect if dubbo services are working normally:</p>
<p>basically they use native java methods or telnet protocol with python</p>
<p><a target="_blank" rel="noopener" href="http://www.shouhuola.com/q-23671.html">http://www.shouhuola.com/q-23671.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.yisu.com/zixun/576879.html">https://www.yisu.com/zixun/576879.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/leozhanggg/p/14176752.html">https://www.cnblogs.com/leozhanggg/p/14176752.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv13670275/">https://www.bilibili.com/read/cv13670275/</a></p>
<p><a target="_blank" rel="noopener" href="http://www.zztongyun.com/article/article-1-1.html">http://www.zztongyun.com/article/article-1-1.html</a> (open with <code>elinks</code> to prevent ads)</p>

	
	</div>
  <a type="button" href="/blog/2022/12/13/e270170a-1520-4c18-af65-f9c4cc62a93e/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2022-12-13 </div>
			<div class="article-title"><a href="/blog/2022/12/13/632276b5-d88f-4c9d-a721-db7e1ae1afc2/" title="Turing-Project focuses on Artificial Intelligence and Natural Language Processing, developing innovative tools such as AntiFraudChatBot and Video Transfer. They have collaborated with technologies like Megatron, Yuan 1.0, and DCT-Net for various applications. However, their work is only accessible for a limited time before restrictions are applied.">turing-project and his works on AI and NLP</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>he recently interacts with racketeers on wechat, find how to add new friends (and groups if any) on wechat.</p>
<p>the <a target="_blank" rel="noopener" href="https://space.bilibili.com/371846699">bilibili user</a> and <a target="_blank" rel="noopener" href="https://github.com/youngfish42?tab=repositories">his repo</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Turing-Project/AI-Video-Transfer">video transfer</a> based on <a target="_blank" rel="noopener" href="https://github.com/menyifang/DCT-Net">DCT-Net</a> 视频洗稿 伪原创</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Turing-Project/AntiFraudChatBot">AntiFraudChatBot</a> is a wechaty bot using a super large model based on <a target="_blank" rel="noopener" href="https://github.com/NVIDIA/Megatron-LM">megatron</a> called <a target="_blank" rel="noopener" href="https://github.com/Shawn-Inspur/Yuan-1.0">Yuan 1.0</a> which is only <a target="_blank" rel="noopener" href="https://air.inspur.com/home">freely avaliable</a> within three month (30k api calls) when applied to chat with racketeers, another application: <a target="_blank" rel="noopener" href="https://github.com/bigbrother666sh/shezhangbujianle">AI剧本杀</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/bigscience-workshop/Megatron-DeepSpeed">megatron deepspeed</a> enables training large model on cheap hardware</p>
<p><a target="_blank" rel="noopener" href="https://github.com/EssayKillerBrain">essaykillerbrain</a> is another project he has involved in, which contains <a target="_blank" rel="noopener" href="https://github.com/EssayKillerBrain/EssayKiller_V2">EssayKiller_V2</a> <a target="_blank" rel="noopener" href="https://github.com/EssayKillerBrain/EssayKiller_V1">EssayKiller_V1</a> <a target="_blank" rel="noopener" href="https://github.com/EssayKillerBrain/EssayTopicPredict">EssayTopicPredict</a> <a target="_blank" rel="noopener" href="https://github.com/EssayKillerBrain/WritterBrainBase">WrittenBrainBase</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Tssck/AlphaFold2-Chinese">alphafold in mindspore</a></p>

	
	</div>
  <a type="button" href="/blog/2022/12/13/632276b5-d88f-4c9d-a721-db7e1ae1afc2/#more" class="btn btn-default more">Read More</a>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
		<li class="prev"><a href="/blog/page/11/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/blog/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/blog/page/13/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/agi_computer_control/" title="Autonomous computer agent" target="_blank"]);">Project Cybergod</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media content automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/prometheous/" title="Automated documentation, AI+IR(RAG)" target="_blank"]);">Project Prometheus</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media Content Automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/my_blog_source/" title="Source code of my blog"" target="_blank"]);">Blog Source Code</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/james4ever0" title="My Github account" target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://samoyedsun.github.io/" title="Samoyedsun's Blog" target="_blank"]);">Samoyedsun&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="http://atlant1c.cn/" title="Atlant1c's Blog" target="_blank"]);">Atlant1c&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://www.gregoryuan.com/" title="Gregoryuan's Blog" target="_blank"]);">Gregoryuan&#39;s Blog</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	

</div> <!-- row-fluid -->


    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2023 James Brown
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/blog/js/jquery.imagesloaded.min.js"></script>
<script src="/blog/js/gallery.js"></script>
<script src="/blog/js/bootstrap.min.js"></script>
<script src="/blog/js/main.js"></script>
<script src="/blog/js/search.js"></script> 


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/blog/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
</html>