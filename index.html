<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Blog of James Brown</title>
  <meta name="author" content="James Brown">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Blog of James Brown"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/blog/atom.xml" title="Blog of James Brown" type="application/atom+xml">
  
  
    <link href="/blog/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/blog/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/blog/js/jquery-2.0.3.min.js"></script>
  
  
  <!-- analytics -->
  



<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/blog/">Blog of James Brown</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/blog/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/blog/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">Blog of James Brown</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		
<div class="slogan">
      <i class="fa fa-heart"></i>
      Autonomous Machines &amp; Society.
</div>


		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
            
		
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-29 </div>
			<div class="article-title"><a href="/blog/2024/07/29/be41ceb8-7245-4d0f-bd02-71417f776539/" title="The text shares two links, one to monosans/proxy-list and another to hookzof/socks5_list, which offer comprehensive lists of proxies. Proxies are utilized for accessing websites anonymously or circumventing geographical restrictions.">Two Proxy Lists For Anonymous Web Access And Geographic Bypass</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="Proxy-list"><a href="#Proxy-list" class="headerlink" title="Proxy list"></a>Proxy list</h1><p><a target="_blank" rel="noopener" href="https://github.com/monosans/proxy-list">https://github.com/monosans/proxy-list</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/hookzof/socks5_list">https://github.com/hookzof/socks5_list</a></p>

	
	</div>
  <a type="button" href="/blog/2024/07/29/be41ceb8-7245-4d0f-bd02-71417f776539/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-28 </div>
			<div class="article-title"><a href="/blog/2024/07/28/0279a34e-d05d-4687-9963-0e1cbc182ebf/" title="This article offers guidance on minimizing RAM consumption in web browsers like Firefox. It suggests enabling the &#39;browser.tabs.unloadOnLowMemory&#39; setting within &#39;about:config&#39; and installing the &#39;Auto Tab Discard&#39; extension to automatically dismiss idle tabs.">Reducing Ram Usage In Browsers: Tips For Firefox</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="Suspend-unused-tabs-to-save-RAM"><a href="#Suspend-unused-tabs-to-save-RAM" class="headerlink" title="Suspend unused tabs to save RAM"></a>Suspend unused tabs to save RAM</h1><p>enable <code>browser.tabs.unloadOnLowMemory</code> in <code>about:config</code> for Firefox</p>
<p>install <code>Auto Tab Discard</code> browser plugin</p>

	
	</div>
  <a type="button" href="/blog/2024/07/28/0279a34e-d05d-4687-9963-0e1cbc182ebf/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-27 </div>
			<div class="article-title"><a href="/blog/2024/07/27/4fb6145c-b1cb-437a-8eca-efe98e748372/" title="This article provides a step-by-step guide on how to set up a Proxmox cluster using the GUI or command line. It covers creating a new cluster, adding slave devices, and checking the status of the master device on the cluster setup page. The instructions are sourced from Howtoforge.com and the Proxmox.com wiki for accurate information.">Proxmox Cluster Setup</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>either use gui or command line</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run on master device</span></span><br><span class="line">pvecm create &lt;cluster_name&gt;</span><br><span class="line"><span class="comment"># run on slave device</span></span><br><span class="line">pvecm add &lt;cluster_ip&gt;</span><br><span class="line"><span class="comment"># check on master device</span></span><br><span class="line">pvecm status</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>reference:</p>
<p><a target="_blank" rel="noopener" href="https://www.howtoforge.com/tutorial/how-to-configure-a-proxmox-ve-4-multi-node-cluster/">https://www.howtoforge.com/tutorial/how-to-configure-a-proxmox-ve-4-multi-node-cluster/</a></p>
<p><a target="_blank" rel="noopener" href="https://pve.proxmox.com/wiki/Cluster_Manager">https://pve.proxmox.com/wiki/Cluster_Manager</a></p>

	
	</div>
  <a type="button" href="/blog/2024/07/27/4fb6145c-b1cb-437a-8eca-efe98e748372/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-27 </div>
			<div class="article-title"><a href="/blog/2024/07/27/ce4340d8-86c1-4ffe-a0e5-27a77e83bd8f/" title="This article explains how to change the data storage path of K3S, a lightweight and minimal Kubernetes distribution, by utilizing the `K3S_DATA_DIR` environment variable. It also guides users through stopping services, copying data, modifying service files with the new path, and restarting k3s using a daemon reload.">K3S Change Data Storage Path</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<p>you can configure <code>K3S_DATA_DIR</code> environment variable during installation</p>
<hr>
<p>first, stop all k3s services</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run with root</span></span><br><span class="line">systemctl stop k3s <span class="comment"># k3s-agent otherwise</span></span><br><span class="line">k3s-killall.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>copy the data to new location</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync -avh --progress /var/lib/rancher/k3s &lt;path_to_store_data&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>then modify the service file under <code>/etc/systemd/system/k3s.service</code> or <code>/etc/systemd/system/k3s-agent.service</code>, add one additional flag <code>--data-dir &lt;path_to_store_data&gt;</code> to the commandline</p>
<p>restart the service after done</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start k3s</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/07/27/ce4340d8-86c1-4ffe-a0e5-27a77e83bd8f/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-26 </div>
			<div class="article-title"><a href="/blog/2024/07/26/47372e0e-9f4a-4590-af31-cbfe5ca2c39d/" title="This article guides you through the process of copying an encrypted Linux installation to a new disk. It explains how to use the &#39;dd&#39; command in the terminal to clone the source disk to the target disk, and then resize the encrypted partition, root partition, and swap partition using either KDE Partition Manager or following a manual guide provided in the link.">How To Clone And Resize Encrypted Linux Installation</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="copy-encrypted-linux-install-to-new-disk"><a href="#copy-encrypted-linux-install-to-new-disk" class="headerlink" title="copy encrypted linux install to new disk"></a>copy encrypted linux install to new disk</h1><p>perform a bit-by-bit clone to new disk</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">dd</span> <span class="keyword">if</span>=&lt;source_disk_device&gt; of=&lt;target_disk_device&gt; bs=4M status=progress</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>remember to detach the old disk and enlarge the system partition on new disk</p>
<hr>
<p>in kde partiton manager, you can resize both the encrypted partition and the root partition as well as the swap partition (install tools prompted by name)</p>
<p>follow the guide here to do it manually:</p>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Resizing_LVM-on-LUKS">https://wiki.archlinux.org/title/Resizing_LVM-on-LUKS</a></p>

	
	</div>
  <a type="button" href="/blog/2024/07/26/47372e0e-9f4a-4590-af31-cbfe5ca2c39d/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-26 </div>
			<div class="article-title"><a href="/blog/2024/07/26/68fcab1a-fa65-4560-af60-2b04c10d6317/" title="This article provides a solution to avoid conflicts with k8s routing tables by adjusting Ubuntu&#39;s default IP range for network sharing. It explains how to use `nmcli` to modify the device&#39;s IPv4 address and describes the process of unplugging and replugging the cable from the client side.">Configure Ubuntu&#39;S Ip Range For Network Sharing With Kubernetes</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="Change-default-IP-range-settings-for-network-sharing"><a href="#Change-default-IP-range-settings-for-network-sharing" class="headerlink" title="Change default IP range settings for network sharing"></a>Change default IP range settings for network sharing</h1><p>When use network sharing along with k8s things could go wrong. Ubuntu uses <code>10.42.0.1/24</code> which interferes with k8s routing table. It has a larger <code>metric</code> value so the network will be shadowed.</p>
<p>To fix it you do not use <code>ip route</code> or <code>ip addr</code>. You use <code>nmcli</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmcli <span class="comment"># check all connections</span></span><br><span class="line">nmcli device modify &lt;shared_device&gt; ipv4.addr &lt;non_conflict_ip_range&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Remember to unplug and replug the cable from client side.</p>

	
	</div>
  <a type="button" href="/blog/2024/07/26/68fcab1a-fa65-4560-af60-2b04c10d6317/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-25 </div>
			<div class="article-title"><a href="/blog/2024/07/25/94f41044-8e20-4c0a-b388-a90698267758/" title="This article provides guidance on how to start a pod on a specific Kubernetes node using `nodeSelector`, `nodeName` in the pod manifest, and labeling nodes. It also explains how to use `kubectl run` with overrides to specify the desired node name for a pod.">Mastering Node Selection In Kubernetes With Nodeselector, Nodename, And Kubectl Run</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="k8s-start-pod-at-specific-node"><a href="#k8s-start-pod-at-specific-node" class="headerlink" title="k8s start pod at specific node"></a>k8s start pod at specific node</h1><p>specify <code>nodeSelector</code> or <code>nodeName</code> in <code>Pod</code> or <code>VirtualMachineInstance</code> manifest</p>
<p>these selectors are in the <code>spec</code> field</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl run &lt;pod name&gt; --image=&lt;image name&gt; -it --<span class="built_in">rm</span> --overrides=<span class="string">&#x27;&#123;&quot;spec&quot;:&#123;&quot;nodeName&quot;: &quot;&lt;node name&gt;&quot;&#125;&#125;&#x27;</span> -- /bin/sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>to label a node, run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl label node &lt;node_name&gt; &lt;key&gt;=&lt;value&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/07/25/94f41044-8e20-4c0a-b388-a90698267758/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-24 </div>
			<div class="article-title"><a href="/blog/2024/07/24/a460b149-b6fe-4486-990f-4f638d127d85/" title="In Kubernetes, to reboot a pod or VM, you can either delete and recreate it to lose state or scale down the deployment&#39;s replicas for a soft-reboot. Additionally, you can use `virtctl` to manage VMs.">Rebooting A Pod Or Vm In Kubernetes: Deletion, Scaling Down, And Using Virtctl</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="k8s-reboot-pod-and-vm"><a href="#k8s-reboot-pod-and-vm" class="headerlink" title="k8s reboot pod and vm"></a>k8s reboot pod and vm</h1><p>to reboot you need to kill the pod&#x2F;vmi and recreate it, thereby all its states will be lost.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete pod &lt;pod_name&gt;</span><br><span class="line">kubectl delete vmi &lt;vmi_name&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>for vmi there is an option called <code>soft-reboot</code> which is absent in pods. however the vm runner pod must not exit.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">virtctl soft-reboot &lt;vmi_name&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>for pod you you can scale down the replicas of deployment (recommended), or kill the pod directly.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl scale deployment &lt;deployment_name&gt; --replicas=0</span><br><span class="line">kubectl scale deployment &lt;deployment_name&gt; --replicas=&lt;original replica num&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>for vm you are supposed to use <code>virtctl</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">virtctl start &lt;vm_name&gt;</span><br><span class="line">virtctl stop &lt;vm_name&gt;</span><br><span class="line">virtctl restart &lt;vm_name&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/07/24/a460b149-b6fe-4486-990f-4f638d127d85/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-24 </div>
			<div class="article-title"><a href="/blog/2024/07/24/2ff88d41-c9fc-4af0-84ba-ef10cf603ef6/" title="This article provides step-by-step instructions to help you remove X11 and Qt dependencies from your Ubuntu system, turning it into a headless setup. By following these instructions, you can optimize your Ubuntu installation for servers or other environments where a graphical user interface is not required.">How To Remove X11 And Qt Dependencies For A Headless Ubuntu System</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="Make-desktop-ubuntu-headless"><a href="#Make-desktop-ubuntu-headless" class="headerlink" title="Make desktop ubuntu headless"></a>Make desktop ubuntu headless</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge libx11.* libqt.*</span><br><span class="line">sudo apt-get autoremove -y</span><br><span class="line">sudo apt-get clean</span><br><span class="line"></span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/blog/2024/07/24/2ff88d41-c9fc-4af0-84ba-ef10cf603ef6/#more" class="btn btn-default more">Read More</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2024-07-24 </div>
			<div class="article-title"><a href="/blog/2024/07/24/7cc3c7ad-0a27-4bc6-b0e9-0eb12b94196a/" title="This article provides a step-by-step guide to setting up a k8s worker cluster using k3s, including instructions on joining the master node and configuration file details. It also introduces an automated installation tool called k3sup for installing k3s clusters via SSH connections. Furthermore, it offers insights into setting up a high-availability embedded datastore in a multi-server cluster.">Setting Up A K8S Worker Cluster With K3S: Instructions, Configuration Files, And Automated Installation Tool</a></div>
		</h3>
	


			  
<div class="entry">

  <div class="row">
	
	
		<h1 id="k8s-worker-cluster-setup"><a href="#k8s-worker-cluster-setup" class="headerlink" title="k8s worker cluster setup"></a>k8s worker cluster setup</h1><p>k3s has different ways to form a cluster than <code>kubeadm join</code>.</p>
<p><a target="_blank" rel="noopener" href="https://docs.k3s.io/quick-start">https://docs.k3s.io/quick-start</a></p>
<p>k3s specifies the init command in <code>/etc/systemd/system/k3s.service</code>. (<code>k3s-agent.service</code> if installed as agent) usually it is <code>k3s server</code>.</p>
<p>you need to change it to <code>k3s agent</code> in order to join the master node, or pass additional environment variables <code>K3S_URL=https://&lt;node_ip&gt;:6443</code> and <code>K3S_TOKEN=&lt;node-token&gt;</code> while running k3s installation script.</p>
<p>the node token is at <code>/var/lib/rancher/k3s/server/node-token</code></p>
<p>the agent node still needs to configure registry mirrors at <code>/etc/rancher/k3s/registries.yaml</code> for successfully pulling images</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://github.com/alexellis/k3sup">k3sup</a> can automatically install k3s cluster using ssh connection</p>
<hr>
<p>multi server cluster setup:</p>
<p><a target="_blank" rel="noopener" href="https://docs.k3s.io/datastore/ha-embedded">https://docs.k3s.io/datastore/ha-embedded</a></p>

	
	</div>
  <a type="button" href="/blog/2024/07/24/7cc3c7ad-0a27-4bc6-b0e9-0eb12b94196a/#more" class="btn btn-default more">Read More</a>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
          <li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
        

        <li><a href="/blog/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/blog/page/2/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/agi_computer_control/" title="Autonomous computer agent" target="_blank"]);">Project Cybergod</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media content automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/prometheous/" title="Automated documentation, AI+IR(RAG)" target="_blank"]);">Project Prometheus</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/pyjom/" title="Media Content Automation" target="_blank"]);">Project Pyjom</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/james4ever0/my_blog_source/" title="Source code of my blog"" target="_blank"]);">Blog Source Code</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/james4ever0" title="My Github account" target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://samoyedsun.github.io/" title="Samoyedsun's Blog" target="_blank"]);">Samoyedsun&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="http://atlant1c.cn/" title="Atlant1c's Blog" target="_blank"]);">Atlant1c&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://www.gregoryuan.com/" title="Gregoryuan's Blog" target="_blank"]);">Gregoryuan&#39;s Blog</a></li>
	
		<li><i class="fa fa-book"></i><a href="https://yubingtao.netlify.app/" title="Yubingtao's Blog" target="_blank"]);">Yubingtao&#39;s Blog</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	

</div> <!-- row-fluid -->


    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2024 James Brown
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/blog/js/jquery.imagesloaded.min.js"></script>
<script src="/blog/js/gallery.js"></script>
<script src="/blog/js/bootstrap.min.js"></script>
<script src="/blog/js/main.js"></script>
<script src="/blog/js/search.js"></script> 


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/blog/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
</html>